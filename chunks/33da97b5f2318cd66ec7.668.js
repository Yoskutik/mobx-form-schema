"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[668],{8994:function(e,t){t.Z={page:"zXdh",link:"gQ1t"}},5710:function(e,t,n){let a,r,i,o,s,l,c,d,m,h,u,f;n.d(t,{u:function(){return j}});var p,v,b=n(8993),y=n(8379),g=n(4309),w=n(1568),x=n(1525),S=n(8816),k=function(e,t,n,a,r,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?a.static?e:e.prototype:null,m=t||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),h=!1,u=n.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var v=(0,n[u])("accessor"===l?{get:m.get,set:m.set}:m[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=o(v.get))&&(m.get=s),(s=o(v.set))&&(m.set=s),(s=o(v.init))&&r.unshift(s)}else(s=o(v))&&("field"===l?r.unshift(s):m[c]=s)}d&&Object.defineProperty(d,a.name,m),h=!0},Z=function(e,t,n){for(var a=arguments.length>2,r=0;r<t.length;r++)n=a?t[r].call(e,n):t[r].call(e);return a?n:void 0};let F=e=>e.split(" ").map(e=>e?e[0].toUpperCase()+e.substring(1).toLowerCase():e).join(" "),I=(e,t)=>t.email,O=e=>new Set(e),C=(l=S.FormSchema,c=[],d=[],m=[],h=[],u=[],f=[],p=class extends l{constructor(){super(...arguments),this.title=(Z(this,c),Z(this,d,"")),this.extraFeatures=Z(this,m,new Set),this.name=Z(this,h,""),this.email=Z(this,u,""),this.confirmEmail=Z(this,f,"")}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=l[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[S.watch],r=[(0,S.factory)(O),(e=S.watch).set.bind(e)],i=[(0,S.presentation)(F),S.watch],o=[S.watch],s=[(v=S.presentation).hidden.bind(v),(0,S.factory)(I),S.watch],k(null,null,a,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:t},d,c),k(null,null,r,{kind:"field",name:"extraFeatures",static:!1,private:!1,access:{has:e=>"extraFeatures"in e,get:e=>e.extraFeatures,set:(e,t)=>{e.extraFeatures=t}},metadata:t},m,c),k(null,null,i,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:t},h,c),k(null,null,o,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,t)=>{e.email=t}},metadata:t},u,c),k(null,null,s,{kind:"field",name:"confirmEmail",static:!1,private:!1,access:{has:e=>"confirmEmail"in e,get:e=>e.confirmEmail,set:(e,t)=>{e.confirmEmail=t}},metadata:t},f,c),t&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),p),E={title:"Pizza pepperoni",extraFeatures:["Extra cheese","Thin dough"],email:"yoskutik@gmail.com",name:"Dima"},B=e=>new Promise(t=>setTimeout(t,e)),P=()=>B(1e3).then(()=>E),T=e=>B(1e3).then(()=>{E=e}),j=(0,g.Pi)(()=>{let[e,t]=(0,y.useState)(()=>C.create()),n=()=>{var t,n,a,r;return t=void 0,n=void 0,a=void 0,r=function*(){if(e.isChanged){yield T(e.presentation).then(()=>{alert("Order info is saved!"),e.sync()});return}alert("The form is not changed")},new(a||(a=Promise))(function(e,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof a?n:new a(function(e){e(n)})).then(o,s)}l((r=r.apply(t,n||[])).next())})},a=()=>P().then(e=>t(C.create(e)));return(0,b.BX)(x.l,{schema:e,hideValidationInfo:!0,children:[(0,b.tZ)(w.nv,{schema:e,field:"title",label:"Product title"}),(0,b.tZ)(w.IG,{schema:e,field:"extraFeatures",label:"Extra features"}),(0,b.tZ)(w.nv,{schema:e,field:"name",label:"Your name"}),(0,b.tZ)(w.nv,{schema:e,field:"email",type:"email",label:"Your email"}),(0,b.tZ)(w.nv,{schema:e,field:"email",type:"email",label:"Confirm your email"}),(0,b.BX)("div",{children:[(0,b.tZ)(w.zx,{variant:"primary",onClick:n,disabled:!e.isChanged,children:"Save info"}),(0,b.tZ)(w.zx,{variant:"secondary",onClick:a,style:{marginLeft:10},children:"Get info"})]})]})})},1525:function(e,t,n){n.d(t,{l:function(){return s}});var a=n(8993),r=n(1568),i={root:"mIQZ",presentation:"DQH1"},o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};function s(e){var{schema:t,hideObservationInfo:n,hideValidationInfo:s}=e,l=o(e,["schema","hideObservationInfo","hideValidationInfo"]);return(0,a.BX)("div",{className:i.root,children:[(0,a.tZ)("form",Object.assign({},l)),(0,a.tZ)(r.SD,{hideObservationInfo:n,hideValidationInfo:s,schema:t,className:i.presentation})]})}},2668:function(e,t,n){let a,r,i,o,s,l,c,d,m,h,u,f;n.r(t),n.d(t,{default:function(){return T}});var p,v=n(8993),b=n(1568),y={filename:"SignUpSchema.ts",code:"import { FormSchema, presentation, validate, watch } from '@yoskutik/mobx-form-schema';\r\nimport { required, username, email, minLength } from './validators';\r\n\r\nconst confirmPassword = () => (\r\n  (confirmPasswordValue: string, schema: SignUpSchema): boolean | string => {\r\n    if (confirmPasswordValue === schema.password) return false;\r\n    return 'Passwords mismatched';\r\n  }\r\n);\r\n\r\nexport class SignUpSchema extends FormSchema {\r\n  @validate(required(), username())\r\n  @watch username = '';\r\n\r\n  @validate(required(), email())\r\n  @watch email = '';\r\n\r\n  @validate(required(), minLength(8))\r\n  @watch password = '';\r\n\r\n  @presentation.hidden\r\n  @validate(required(), confirmPassword())\r\n  @watch confirmPassword = '';\r\n\r\n  @watch shouldStayLoggedIn = false;\r\n}\r\n"},g=n(8075),w=n(1771),x=n(5710),S=n(8379),k=n(8816),Z=n(4105),F=function(e,t,n,a,r,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?a.static?e:e.prototype:null,m=t||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),h=!1,u=n.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var v=(0,n[u])("accessor"===l?{get:m.get,set:m.set}:m[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=o(v.get))&&(m.get=s),(s=o(v.set))&&(m.set=s),(s=o(v.init))&&r.unshift(s)}else(s=o(v))&&("field"===l?r.unshift(s):m[c]=s)}d&&Object.defineProperty(d,a.name,m),h=!0},I=function(e,t,n){for(var a=arguments.length>2,r=0;r<t.length;r++)n=a?t[r].call(e,n):t[r].call(e);return a?n:void 0};let O=()=>(e,t)=>e!==t.password&&"Passwords mismatched",C=(l=k.FormSchema,c=[],d=[],m=[],h=[],u=[],f=[],p=class extends l{constructor(){super(...arguments),this.username=(I(this,c),I(this,d,"")),this.email=I(this,m,""),this.password=I(this,h,""),this.confirmPassword=I(this,u,""),this.shouldStayLoggedIn=I(this,f,!1)}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=l[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[(0,k.validate)((0,Z.C1)(),(0,Z.b6)()),k.watch],r=[(0,k.validate)((0,Z.C1)(),(0,Z.Do)()),k.watch],i=[(0,k.validate)((0,Z.C1)(),(0,Z.Ei)(8)),k.watch],o=[(e=k.presentation).hidden.bind(e),(0,k.validate)((0,Z.C1)(),O()),k.watch],s=[k.watch],F(null,null,a,{kind:"field",name:"username",static:!1,private:!1,access:{has:e=>"username"in e,get:e=>e.username,set:(e,t)=>{e.username=t}},metadata:t},d,c),F(null,null,r,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,t)=>{e.email=t}},metadata:t},m,c),F(null,null,i,{kind:"field",name:"password",static:!1,private:!1,access:{has:e=>"password"in e,get:e=>e.password,set:(e,t)=>{e.password=t}},metadata:t},h,c),F(null,null,o,{kind:"field",name:"confirmPassword",static:!1,private:!1,access:{has:e=>"confirmPassword"in e,get:e=>e.confirmPassword,set:(e,t)=>{e.confirmPassword=t}},metadata:t},u,c),F(null,null,s,{kind:"field",name:"shouldStayLoggedIn",static:!1,private:!1,access:{has:e=>"shouldStayLoggedIn"in e,get:e=>e.shouldStayLoggedIn,set:(e,t)=>{e.shouldStayLoggedIn=t}},metadata:t},f,c),t&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),p),E=()=>{let e=(0,S.useMemo)(()=>C.create(),[]),t=t=>{if(t.preventDefault(),e.isValid){alert(`Form is valid! Form data: ${JSON.stringify(e.presentation,void 0,2)}`);return}alert(`The form is not valid. Errors: ${JSON.stringify(e.errors,void 0,2)}`)};return(0,v.BX)("form",{onSubmit:t,children:[(0,v.tZ)(b.nv,{schema:e,field:"username",label:"Username",required:!0,maxLength:32}),(0,v.tZ)(b.nv,{schema:e,field:"email",label:"E-mail",type:"email",required:!0,maxLength:64}),(0,v.tZ)(b.nv,{schema:e,field:"password",label:"Password",type:"password",required:!0,maxLength:64}),(0,v.tZ)(b.nv,{label:"Confirm your password",field:"confirmPassword",schema:e,type:"password",maxLength:64,required:!0}),(0,v.tZ)(b.ji,{schema:e,field:"shouldStayLoggedIn",label:"Want to stay logged in"}),(0,v.tZ)(b.zx,{type:"submit",variant:"primary",children:"Submit"})]})};var B=n(8994);let P=()=>(0,v.BX)(v.HY,{children:[(0,v.tZ)(b.$0,{title:"Learn Mobx Form Schema",children:(0,v.tZ)(b.xv,{children:"Welcome to the Mobx Form Schema documentation! Here you'll get a short introduction to what is the MobX Form Schema, when you should use it, and how you can use it."})}),(0,v.BX)(b.$0,{title:"What is Form Schema?",children:[(0,v.tZ)(b.xv,{children:"Usually, in the development of web forms, there must be some logic behind them:"}),(0,v.BX)(b.aV,{children:[(0,v.tZ)("li",{children:"The most basic example is the need for validation. And it can be quite a task. Especially when the validation of one property can depend on the value of another property. Or when it is a conditional validation, like the validation of optional fields."}),(0,v.tZ)("li",{children:"Also, sometimes forms must understand if their current state is different from the initial one. Or they may have a need to be able to be restored to their initial state."}),(0,v.tZ)("li",{children:"And on top of that, forms must communicate with the backend. And sometimes backend response must be pre-processed before being used, or forms content must be processed before being sent to the backend."})]}),(0,v.tZ)(b.xv,{children:"The bigger your forms become, the bigger those problems grow, and the more difficult their maintenance becomes. But MobX Form Schema is ready to fight all of them! This is an extremely tiny library (4KB) that provides an opportunity to describe all the logic of a form in a convenient way with the power of decorators. And even with massive forms, it is easy to use it."}),(0,v.BX)(b.$0,{title:"Validation example",children:[(0,v.tZ)(b.xv,{children:"In the example below, you can see a simple example of form validation. Each field has several validation rules, and each rule must a corresponding error message. Also, you can see that each field in a form is a separate property in a form schema. You try to interact with the form by entering data."}),(0,v.tZ)(b.KE,{items:[y],children:(0,v.tZ)(E,{})})]}),(0,v.BX)(b.$0,{title:"Backend communication and data observation",children:[(0,v.BX)(b.xv,{children:["In the example below, you can see how can response from the backend be pre-process before being used. For example, backend sent an array of strings, but we need it to be an instance of ",(0,v.tZ)(b.EK,{children:"Set"}),". Also, there's a field ",(0,v.tZ)("i",{children:'"Confirm email"'}),", but it's visible only to the user, that's why the backend does not send this info."]}),(0,v.BX)(b.xv,{children:["You can also try changing the data after you receive it. And you'll notice, that if the current state of a form is the same as when it was sent, the ",(0,v.tZ)("i",{children:'"Save"'})," button becomes disabled."]}),(0,v.tZ)(b.KE,{items:[g.Z,w.Z],children:(0,v.tZ)(x.u,{})})]}),(0,v.tZ)(b.$0,{title:"Does it works only with React?",children:(0,v.BX)(b.xv,{children:['Absolutely not! In fact, the only dependency "MobX Form Schema" has i s just ',(0,v.tZ)(b.EK,{children:"mobx"}),". Therefore, you can use anywhere with MobX."]})})]}),(0,v.tZ)(b.$0,{title:"When should you use it?",children:(0,v.tZ)(b.xv,{children:"The best scenario to use MobX Form Schema is when you are already using MobX. It does work great with big forms, but even if you have only small ones there's no disadvantages of using it. Because it is lightweight and optimized!"})}),(0,v.tZ)(b.$0,{title:"How to use?",children:(0,v.BX)(b.xv,{children:["You can follow this tutorial to master using MobX Form Schema. If you are ready, "," ",(0,v.tZ)(b.rU,{to:"/learn/getting-started/installation",className:B.Z.link,children:"click here"}),"."]})})]});var T=P},4105:function(e,t,n){n.d(t,{C1:function(){return a},Do:function(){return r},Ei:function(){return o},b6:function(){return i}});let a=()=>e=>(null==e||!e.trim())&&"This field is required.",r=()=>e=>!/\S+@\S+\.\S+/.test(e)&&"Invalid email format.",i=()=>e=>!/^[a-zA-Z0-9_]+$/.test(e)&&"You can use only latin letters, digits and underscore sign.",o=e=>t=>t.length<e&&`Should be at least ${e} characters.`},1771:function(e,t){t.Z={filename:"BackendExample.tsx",code:'import { useState } from \'react\';\r\nimport { observer } from \'mobx-react\';\r\nimport { Button, ChoiceField, TextField } from \'@components\';\r\nimport { Form } from \'../Form/Form\';\r\nimport { BackendSchema } from \'./BackendSchema\';\r\n\r\nlet orderInfo = {\r\n  title: \'Pizza pepperoni\',\r\n  extraFeatures: [\r\n    \'Extra cheese\',\r\n    \'Thin dough\',\r\n  ],\r\n  email: \'yoskutik@gmail.com\',\r\n  name: \'Dima\',\r\n};\r\n\r\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nconst fakeGetOrderInfo = () => sleep(1000).then(() => orderInfo);\r\n\r\nconst fakeSetOrderInfo = (info: typeof orderInfo) => sleep(1000).then(() => {\r\n  orderInfo = info;\r\n});\r\n\r\nexport const BackendExample = observer(() => {\r\n  const [schema, setSchema] = useState(() => BackendSchema.create());\r\n\r\n  const handleSaveClick = async () => {\r\n    if (schema.isChanged) {\r\n      await fakeSetOrderInfo(schema.presentation as typeof orderInfo).then(() => {\r\n        alert(\'Order info is saved!\');\r\n        schema.sync();\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    alert(\'The form is not changed\');\r\n  };\r\n\r\n  const handleGetInfoClick = () => fakeGetOrderInfo()\r\n    .then(data => setSchema(BackendSchema.create(data)));\r\n\r\n  return (\r\n    <Form schema={schema} hideValidationInfo>\r\n      <TextField schema={schema} field="title" label="Product title" />\r\n      <ChoiceField schema={schema} field="extraFeatures" label="Extra features" />\r\n      <TextField schema={schema} field="name" label="Your name" />\r\n      <TextField schema={schema} field="email" type="email" label="Your email" />\r\n      <TextField schema={schema} field="email" type="email" label="Confirm your email" />\r\n      <div>\r\n        <Button variant="primary" onClick={handleSaveClick} disabled={!schema.isChanged}>\r\n          Save info\r\n        </Button>\r\n        <Button variant="secondary" onClick={handleGetInfoClick} style={{ marginLeft: 10 }}>\r\n          Get info\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  );\r\n});\r\n'}},8075:function(e,t){t.Z={filename:"BackendSchema.ts",code:"import { factory, FormSchema, presentation, watch } from '@yoskutik/mobx-form-schema';\r\n\r\nconst presentName = (value: string) => value\r\n  .split(' ')\r\n  .map(it => (it ? it[0].toUpperCase() + it.substring(1).toLowerCase() : it))\r\n  .join(' ');\r\n\r\nconst createConfirmEmail = (_: string, schema: BackendSchema) => schema.email;\r\n\r\nconst createExtraFeatures = (value: string[]) => new Set(value);\r\n\r\nexport class BackendSchema extends FormSchema {\r\n  @watch title = '';\r\n\r\n  // If received value from backend must be preprocessed before usage,\r\n  //  you can use @factory decorator\r\n  @factory(createExtraFeatures) // or @factory.set\r\n  @watch.set extraFeatures = new Set<string>();\r\n\r\n  // If you have to process the value before sending to backend,\r\n  //  you can use @presentation decorator\r\n  @presentation(presentName)\r\n  @watch name = '';\r\n\r\n  @watch email = '';\r\n\r\n  // With @presentation decorator you can even entirely cut off the value\r\n  //  from the form presentation, which can be used as backend request body.\r\n  @presentation.hidden\r\n  @factory(createConfirmEmail)\r\n  @watch confirmEmail = '';\r\n}\r\n"}}}]);