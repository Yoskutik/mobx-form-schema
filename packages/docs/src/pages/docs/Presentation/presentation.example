import { FormSchema, presentation } from '@yoskutik/mobx-form-schema';
import { format } from 'date-fns';

const presentOther = (_: unknown, schema: Schema) =>
  schema.date.getFullYear() < 2023 ? 'less' : 'not less';

const presentMonth = (date: Date) => format(date, 'yyyy-MM');

export class Schema extends FormSchema {
  @presentation(presentOther)
  other: string;

  @presentation(presentMonth)
  date = new Date();
}

const schema1 = Schema.create();
console.log(schema1.other); // 'not less'
console.log(schema1.date);  // '2023-05'

const schema2 = Schema.create({
  date: new Date('2022-06-01T00:00:00.000Z'),
});
console.log(schema2.other); // 'less'
console.log(schema2.date);  // '2022-05'