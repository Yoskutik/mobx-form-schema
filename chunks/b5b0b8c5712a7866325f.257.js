"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[257],{4831:function(e,t,n){let r,a,i,s,o,c;n.d(t,{d:function(){return u}});var l,h=n(8520),d=function(e,t,n,r,a,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",h=!t&&e?r.static?e:e.prototype:null,d=t||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),m=!1,u=n.length-1;u>=0;u--){var p={};for(var f in r)p[f]="access"===f?{}:r[f];for(var f in r.access)p.access[f]=r.access[f];p.addInitializer=function(e){if(m)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var y=(0,n[u])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw TypeError("Object expected");(o=s(y.get))&&(d.get=o),(o=s(y.set))&&(d.set=o),(o=s(y.init))&&a.unshift(o)}else(o=s(y))&&("field"===c?a.unshift(o):d[l]=o)}h&&Object.defineProperty(h,r.name,d),m=!0},m=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0};let u=(i=h.FormSchema,s=[],o=[],c=[],l=class extends i{constructor(){super(...arguments),this.name=(m(this,s),m(this,o,"Joe")),this.surname=m(this,c,"Dough")}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=i[Symbol.metadata])&&void 0!==e?e:null):void 0;r=[h.watch],a=[h.watch],d(null,null,r,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:t},o,s),d(null,null,a,{kind:"field",name:"surname",static:!1,private:!1,access:{has:e=>"surname"in e,get:e=>e.surname,set:(e,t)=>{e.surname=t}},metadata:t},c,s),t&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),l)},4257:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(8993),a=n(1568),i={filename:"ManualExample.tsx",code:'import { observer } from \'mobx-react\';\r\nimport { useMemo } from \'react\';\r\nimport { Button, TextField } from \'@components\';\r\nimport { SchemaObservationInfo } from \'../SchemaObservationInfo\';\r\nimport { ObservationButtons } from \'../ObservationButtons\';\r\nimport { BasicSchema } from \'../BasicObservation/BasicSchema\';\r\n\r\nexport const ManualExample = observer(() => {\r\n  const schema = useMemo(() => BasicSchema.create({}, true), []);\r\n\r\n  const handleSaveClick = () => {\r\n    schema.sync();\r\n  };\r\n\r\n  const handleRestoreClick = () => {\r\n    schema.reset();\r\n  };\r\n\r\n  const handleCheckNameClick = () => {\r\n    schema.updateIsPropertyChanged(\'name\');\r\n  };\r\n\r\n  const handleCheckAllClick = () => {\r\n    schema.updateIsChangedAny();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TextField schema={schema} field="name" label="Name" />\r\n      <TextField schema={schema} field="surname" label="Surname" />\r\n\r\n      <div style={{ marginBottom: 12 }}>\r\n        <Button onClick={handleCheckNameClick} variant="secondary" size="s">\r\n          Check name\r\n        </Button>\r\n        <Button onClick={handleCheckAllClick} variant="secondary" size="s" style={{ marginLeft: 12 }}>\r\n          Check all\r\n        </Button>\r\n      </div>\r\n\r\n      <ObservationButtons\r\n        onRestore={handleRestoreClick}\r\n        onSave={handleSaveClick}\r\n        schema={schema}\r\n      />\r\n\r\n      <SchemaObservationInfo schema={schema} />\r\n    </div>\r\n  );\r\n});\r\n'},s=n(4309),o=n(8379),c=n(4133),l=n(858),h=n(4831);let d=(0,s.Pi)(()=>{let e=(0,o.useMemo)(()=>h.d.create({},!0),[]),t=()=>{e.sync()},n=()=>{e.reset()},i=()=>{e.updateIsPropertyChanged("name")},s=()=>{e.updateIsChangedAny()};return(0,r.BX)("div",{children:[(0,r.tZ)(a.nv,{schema:e,field:"name",label:"Name"}),(0,r.tZ)(a.nv,{schema:e,field:"surname",label:"Surname"}),(0,r.BX)("div",{style:{marginBottom:12},children:[(0,r.tZ)(a.zx,{onClick:i,variant:"secondary",size:"s",children:"Check name"}),(0,r.tZ)(a.zx,{onClick:s,variant:"secondary",size:"s",style:{marginLeft:12},children:"Check all"})]}),(0,r.tZ)(l.A,{onRestore:n,onSave:t,schema:e}),(0,r.tZ)(c.E,{schema:e})]})}),m=()=>(0,r.BX)(r.HY,{children:[(0,r.BX)(a.$0,{title:"Manual form changes check",children:[(0,r.tZ)(a.xv,{children:"Just like with validation, you can stop checking your form changes automatically and make these checks manually. On order to do it, you just have to create the schema in the manual mode."}),(0,r.tZ)(a.KE,{items:[{filename:"ManualExample.ts",code:"const schema = BasicSchema.create({}, true);"}]}),(0,r.BX)(a.xv,{children:["And then, to make a check for a property, you can call the ",(0,r.tZ)(a.EK,{children:"updateIsPropertyChanged"})," method and pass the name of the property. This method will update the ",(0,r.tZ)(a.EK,{children:"changedProperties"})," set and return a boolean, which tells if the property is different from the initial state."]}),(0,r.BX)(a.xv,{children:["Alternatively, you can call the ",(0,r.tZ)(a.EK,{children:"updateIsChangedAny"})," method to check the schema entirely. This method updates the ",(0,r.tZ)(a.EK,{children:"changedProperties"})," set as well."]}),(0,r.tZ)(a.KE,{items:[i],children:(0,r.tZ)(d,{})})]}),(0,r.tZ)(a.$0,{title:"Next",forcedLevel:3,children:(0,r.tZ)(a.xv,{children:"Read about how you can create form schemas with the data from the backend and how you can simplify your communication with the backend in the next articles."})})]});var u=m},858:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(8993),a=n(4309),i=n(1568);let s=(0,a.Pi)(({schema:e,onRestore:t,onSave:n})=>(0,r.BX)("div",{style:{marginTop:12},children:[(0,r.tZ)(i.zx,{variant:"primary",onClick:n,disabled:!e.isChanged,children:"Save"}),(0,r.tZ)(i.zx,{onClick:t,disabled:!e.isChanged,style:{marginLeft:12},variant:"primary",children:"Restore"})]}))},4133:function(e,t,n){n.d(t,{E:function(){return o}});var r=n(8993),a=n(4309),i=n(75),s={root:"HQPJ",pre:"gwvf",preItem:"FVu9"};let o=(0,a.Pi)(({schema:e})=>{let t=e=>{let t=(0,i.ZN)(e);return JSON.stringify(t instanceof Set?[...t]:t,void 0,2)};return(0,r.BX)("div",{className:s.root,children:[(0,r.BX)("span",{children:["Is form changed: ",e.isChanged.toString()]}),(0,r.BX)("div",{className:s.pre,children:["Changed properties: ",t(e.changedProperties)]}),(0,r.BX)("div",{className:s.pre,children:["Initial properties properties:",Object.keys(e).map(n=>(0,r.BX)("div",{className:s.preItem,children:[n,": ",t(e.getInitial(n))]},n))]})]})})},4593:function(e,t,n){n.d(t,{FormSchema:function(){return V},factory:function(){return G},nestedSchema:function(){return es},nestedSchemasArray:function(){return eo},presentation:function(){return en},validate:function(){return P},watch:function(){return q}});var r,a,i,s=n(75);let o=e=>Symbol(e),c=o(),l=o(),h=o("InitialValues"),d=o("Errors"),m=o("ChangedKeys"),u=o(),p=o(),f=o(),y=o(),v=Object,g="comparator",k="presentation",C="schema",b="schemasArray",I=v.keys,B=new WeakMap,S=(e,t="string")=>typeof e===t,x=e=>B.get(e),w=(e,t,n)=>(n=(n=x(t))&&n[e])?n:(n=S(n=v.getPrototypeOf(t),"object")?n:null)?w(e,n):void 0,O=(e,t)=>w(e,t)||{},E=(e,t,n,r,a,i)=>{t&&(S(n)||S(n,"symbol"))?((a=O(e,t))[f]!==t&&(a=v.assign({},a)),a[n]=r,a[f]=t,(x(t)||B.set(t,{})&&x(t))[e]=a):n.addInitializer(function(){E(e,this,n.name,r)})},P=(...e)=>(t,n)=>E(l,t,n,{validators:e});P.if=(e,t)=>(n,r)=>E(l,n,r,{validators:t,condition:e});let Z=(e,t,n)=>W(I(e).concat(I(t))).forEach(e=>n(e)),A=(e,t,n)=>!!(t[n]&&(!t[n].condition||t[n].condition(e[n],e))),z=(e,t,n,r=A(e,t,n),a)=>!!t[n]&&(r&&t[n].validators.find(t=>a=t(e[n],e)),(0,s.z)(()=>S(a)||!0===a?e[d][n]=a:delete e[d][n]),a),F=(e,t,n,r)=>(r=!t[n]||t[n][g](e[n],e[h][n],e,n),(0,s.z)(()=>e[m][r?"delete":"add"](n)),!r),N=(e,t,n,r)=>I(r=O(t,e)).reduce((t,a)=>!!n(e,r,a)||t,!1),X=(e,t,n,r)=>I(r=O(c,e)).forEach(a=>n(e,a,r[a][t])),L=e=>{e[y]&&(e.updateIsValidAll(),e.updateIsChangedAny())},j=(e,t)=>I(e).forEach(e=>t(e));class V{static create(e={},t){let n=new this(e),r=O(u,n),a=O(l,n),i=O(c,n),o={[h]:s.LO.ref,[m]:s.LO,[d]:s.LO,[k]:s.Fl,isChanged:s.Fl,isValid:s.Fl,errors:s.Fl,updateIsPropertyChanged:s.aD,updateIsPropertyValid:s.aD,updateIsChangedAny:s.aD,updateIsValidAll:s.aD,reset:s.aD,sync:s.aD};Z(r,e,t=>{r[t]?n[t]=r[t](e[t],e,n,n[t]):t in e&&(n[t]=e[t])}),j(i,(e,t,r)=>{(0,s.wn)(n,e)||(t=s.LO,(r=i[e][g])===D||r===K?t=s.LO.ref:(r===$||r===J||r===H)&&(t=s.LO.shallow),o[e]=t)});try{(0,s.rC)(n,o)}catch(e){j(o,e=>!(0,s.wn)(n,e)&&o[e](n,e)),(0,s.rC)(n)}return n.sync(),n[y]=t,t||(j(i,(e,t)=>(0,s.N7)(n,e,()=>(t&&t(),t=(0,s.EH)(()=>F(n,i,e))),!0)),j(a,(e,t)=>{t=s.LO.box(!1),(0,s.EH)(()=>t.set(A(n,a,e))),(0,s.EH)(()=>z(n,a,e,t.get()))})),n.onInit&&n.onInit(),n}get presentation(){let e={},t=this,n=O(p,t);return Z(n,t,(r,a)=>{(a=n[r])&&a.hidden||(e[r]=a&&a[k]?a[k](t[r],t):t[r])}),e}get isChanged(){return this[m].size>0}get isValid(){return v.values(this[d]).every(e=>!e)}get errors(){return this[d]}get changedProperties(){return this[m]}getInitial(e){return this[h][e]}sync(){let e={};X(this,"saveFn",(t,n,r)=>e[n]=r(t[n],t)),this[h]=e,L(this)}reset(){X(this,"restoreFn",(e,t,n)=>e[t]=n(e[h][t],e)),L(this)}updateIsPropertyValid(e){return z(this,O(l,this),e)}updateIsValidAll(){return N(this,l,z)}updateIsPropertyChanged(e){return F(this,O(c,this),e)}updateIsChangedAny(){return N(this,c,F)}constructor(){this[r]={},this[a]=W(),this[i]={}}}r=d,a=m,i=h;let _=e=>(e&&e.sync(),e),T=e=>(e&&e.reset(),e),D=(e,t,n,r,a,i)=>(!e||!e.isChanged)&&(e===t||!!e&&!!t&&e.constructor===t.constructor&&((i=I(a=O(c,e)).find(n=>!a[n][g](e[n],t[n],e)))&&(0,s.z)(()=>e[h]=t[h]),!i)),M=e=>(t,n,r,a)=>!!(n&&t?n.length===t.length&&t.every((t,i)=>e(t,n[i],r,a)):n===t),K=(e,t)=>e===t,R=e=>e,H=M(D),J=(e,t,n,r)=>!!(e&&t&&e.size===t.size&&Array.from(e).every(e=>t.has(e))),$=M(K),Q=e=>e.slice(),W=e=>new Set(e),Y=(e,t,n)=>{let r=(r,a)=>E(c,r,a,{[g]:e,saveFn:t,restoreFn:n});return r[g]=e,r},q=Y(K,R,R);q.create=Y,q[C]=Y(D,_,T),q[b]=Y(H,e=>e?e.map(_):e,e=>e?e.map(T):e),q.array=Y($,Q,Q),q.set=Y(J,W,W);let G=e=>(t,n)=>E(u,t,n,e),U=(e,t)=>t?e.create(t):t,ee=e=>(t,n)=>G((r,a,i,s)=>(t&&S(n)?n:n.name)in a?e(r,a,i,s):s)(t,n);G[C]=e=>ee(t=>U(e,t)),G[b]=e=>ee(t=>t?t.map(t=>U(e,t)):t),G.set=ee(W);let et=e=>(t,n)=>E(p,t,n,e),en=e=>et({[k]:e});en.hidden=et({hidden:!0});let er=(e,t,n,r,a,i)=>(P(n)(e,t),r(e,t),a(e,t),en(i)(e,t)),ea=e=>!e.isValid,ei=e=>e[k],es=e=>(t,n)=>er(t,n,ea,q[C],G[C](e),ei),eo=e=>(t,n)=>er(t,n,e=>e.some(ea),q[b],G[b](e),e=>e.map(ei))},8520:function(e,t,n){e.exports=n(4593)}}]);