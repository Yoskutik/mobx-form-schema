"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[223],{5710:function(e,r,t){let a,n,i,s,o,l,c,m,d,h,u,f;t.d(r,{u:function(){return T}});var p,v,b=t(8993),y=t(8379),g=t(4309),w=t(1568),S=t(1525),x=t(8520),k=function(e,r,t,a,n,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!r&&e?a.static?e:e.prototype:null,d=r||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=t.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,t[u])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=s(v.get))&&(d.get=o),(o=s(v.set))&&(d.set=o),(o=s(v.init))&&n.unshift(o)}else(o=s(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},F=function(e,r,t){for(var a=arguments.length>2,n=0;n<r.length;n++)t=a?r[n].call(e,t):r[n].call(e);return a?t:void 0};let E=e=>e.split(" ").map(e=>e?e[0].toUpperCase()+e.substring(1).toLowerCase():e).join(" "),C=(e,r)=>r.email,O=e=>new Set(e),P=(l=x.FormSchema,c=[],m=[],d=[],h=[],u=[],f=[],p=class extends l{constructor(){super(...arguments),this.title=(F(this,c),F(this,m,"")),this.extraFeatures=F(this,d,new Set),this.name=F(this,h,""),this.email=F(this,u,""),this.confirmEmail=F(this,f,"")}},(()=>{var e;let r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=l[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[x.watch],n=[(0,x.factory)(O),(e=x.watch).set.bind(e)],i=[(0,x.presentation)(E),x.watch],s=[x.watch],o=[(v=x.presentation).hidden.bind(v),(0,x.factory)(C),x.watch],k(null,null,a,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,r)=>{e.title=r}},metadata:r},m,c),k(null,null,n,{kind:"field",name:"extraFeatures",static:!1,private:!1,access:{has:e=>"extraFeatures"in e,get:e=>e.extraFeatures,set:(e,r)=>{e.extraFeatures=r}},metadata:r},d,c),k(null,null,i,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,r)=>{e.name=r}},metadata:r},h,c),k(null,null,s,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,r)=>{e.email=r}},metadata:r},u,c),k(null,null,o,{kind:"field",name:"confirmEmail",static:!1,private:!1,access:{has:e=>"confirmEmail"in e,get:e=>e.confirmEmail,set:(e,r)=>{e.confirmEmail=r}},metadata:r},f,c),r&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),p),Z={title:"Pizza pepperoni",extraFeatures:["Extra cheese","Thin dough"],email:"yoskutik@gmail.com",name:"Dima"},I=e=>new Promise(r=>setTimeout(r,e)),B=()=>I(1e3).then(()=>Z),L=e=>I(1e3).then(()=>{Z=e}),T=(0,g.Pi)(()=>{let[e,r]=(0,y.useState)(()=>P.create()),t=()=>{var r,t,a,n;return r=void 0,t=void 0,a=void 0,n=function*(){if(e.isChanged){yield L(e.presentation).then(()=>{alert("Order info is saved!"),e.sync()});return}alert("The form is not changed")},new(a||(a=Promise))(function(e,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(r){var t;r.done?e(r.value):((t=r.value)instanceof a?t:new a(function(e){e(t)})).then(s,o)}l((n=n.apply(r,t||[])).next())})},a=()=>B().then(e=>r(P.create(e)));return(0,b.BX)(S.l,{schema:e,hideValidationInfo:!0,children:[(0,b.tZ)(w.nv,{schema:e,field:"title",label:"Product title"}),(0,b.tZ)(w.IG,{schema:e,field:"extraFeatures",label:"Extra features"}),(0,b.tZ)(w.nv,{schema:e,field:"name",label:"Your name"}),(0,b.tZ)(w.nv,{schema:e,field:"email",type:"email",label:"Your email"}),(0,b.tZ)(w.nv,{schema:e,field:"email",type:"email",label:"Confirm your email"}),(0,b.BX)("div",{children:[(0,b.tZ)(w.zx,{variant:"primary",onClick:t,disabled:!e.isChanged,children:"Save info"}),(0,b.tZ)(w.zx,{variant:"secondary",onClick:a,style:{marginLeft:10},children:"Get info"})]})]})})},1525:function(e,r,t){t.d(r,{l:function(){return o}});var a=t(8993),n=t(1568),i={root:"mIQZ",presentation:"DQH1"},s=function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>r.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>r.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]]);return t};function o(e){var{schema:r,hideObservationInfo:t,hideValidationInfo:o}=e,l=s(e,["schema","hideObservationInfo","hideValidationInfo"]);return(0,a.BX)("div",{className:i.root,children:[(0,a.tZ)("form",Object.assign({},l)),(0,a.tZ)(n.SD,{hideObservationInfo:t,hideValidationInfo:o,schema:r,className:i.presentation})]})}},223:function(e,r,t){let a,n,i,s,o,l,c,m,d,h,u,f,p,v,b,y,g,w,S,x,k,F,E,C,O,P;t.r(r),t.d(r,{default:function(){return ef}});var Z,I,B,L,T=t(8993),N=t(8379),j=t(6277),z=t(1568),X={filename:"LoginSchema.ts",code:"import { FormSchema, validate, watch } from '@yoskutik/mobx-form-schema';\r\nimport { email, required } from '../Validation/validators';\r\n\r\nexport class LoginSchema extends FormSchema {\r\n  @validate(required(), email())\r\n  @watch email = '';\r\n\r\n  @validate(required())\r\n  @watch password = '';\r\n\r\n  @watch shouldRememberMe = false;\r\n}\r\n"},M={filename:"LoginExample.tsx",code:"import { useMemo, FormEvent } from 'react';\r\nimport { Button, CheckboxField, TextField } from '@components';\r\nimport { Form } from '../Form/Form';\r\nimport { LoginSchema } from './LoginSchema';\r\n\r\nexport const LoginExample = () => {\r\n  const schema = useMemo(() => LoginSchema.create(), []);\r\n\r\n  const handleSubmit = (evt: FormEvent) => {\r\n    evt.preventDefault();\r\n\r\n    if (schema.isValid && schema.isChanged) {\r\n      alert(\r\n        'Login succeeded!\\n'\r\n        + 'Your credentials temporally saved.\\n'\r\n        + 'You can now try to change the form to see, how does form changes observation works.',\r\n      );\r\n      schema.sync();\r\n      return;\r\n    }\r\n\r\n    if (!schema.isChanged) {\r\n      alert('The form is not changed');\r\n      return;\r\n    }\r\n\r\n    alert(\r\n      'The form is not valid!\\n'\r\n      + `Errors: ${JSON.stringify(schema.errors, undefined, 2)}`,\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={handleSubmit} schema={schema}>\r\n      <TextField schema={schema} field=\"email\" label=\"E-mail\" />\r\n      <TextField schema={schema} field=\"password\" type=\"password\" label=\"Password\" />\r\n      <CheckboxField schema={schema} field=\"shouldRememberMe\" label=\"Remember me\" />\r\n      <Button type=\"submit\" variant=\"primary\">Login</Button>\r\n    </Form>\r\n  );\r\n};\r\n"},V={filename:"SignUpSchema.tsx",code:"import { FormSchema, validate, watch } from '@yoskutik/mobx-form-schema';\r\n// You can see source code of validation functions in the `validators` file\r\nimport { email, minLength, required, username } from '../Validation/validators';\r\n\r\nconst confirmPassword = () => (confirmPasswordValue: string, schema: SignUpSchema) => {\r\n  if (confirmPasswordValue === schema.password) return false;\r\n  return 'Passwords mismatched';\r\n};\r\n\r\nexport class SignUpSchema extends FormSchema {\r\n  // To define a validation rule for a specific field\r\n  //  simply use @validate decorator and pass validation rules.\r\n  @validate(required(), username())\r\n  @watch username = '';\r\n\r\n  // If validation of a field is conditional, you\r\n  //  can use @validate.if decorator, and pass desired condition\r\n  //  as the first argument.\r\n  @validate.if(Boolean, [email()])\r\n  @watch email = '';\r\n\r\n  @validate(required(), minLength(8))\r\n  @watch password = '';\r\n\r\n  // Your validation rules can depend on other fields of a schema.\r\n  //  Here, if confirmPassword is not equal to password the\r\n  //  validation is considered not passed.\r\n  @validate(required(), confirmPassword())\r\n  @watch confirmPassword = '';\r\n}\r\n"},D={filename:"SignUpExample.tsx",code:'import { useMemo, FormEvent } from \'react\';\r\nimport { Button, TextField } from \'@components\';\r\nimport { Form } from \'../Form/Form\';\r\nimport { SignUpSchema } from \'./SignUpSchema\';\r\n\r\nexport const SignUpExample = () => {\r\n  const schema = useMemo(() => SignUpSchema.create(), []);\r\n\r\n  const handleSubmit = (evt: FormEvent) => {\r\n    evt.preventDefault();\r\n\r\n    if (schema.isValid) {\r\n      alert(\'Form is valid, sign up succeeded!\');\r\n      return;\r\n    }\r\n\r\n    alert(\r\n      \'The form is not valid!\\n\'\r\n      + `Errors: ${JSON.stringify(schema.errors, undefined, 2)}`,\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={handleSubmit} schema={schema} hideObservationInfo>\r\n      <TextField schema={schema} field="username" label="Username" required maxLength={32} />\r\n      <TextField schema={schema} field="email" label="E-mail" type="email" maxLength={64} />\r\n      <TextField schema={schema} field="password" label="Password" type="password" required maxLength={64} />\r\n      <TextField\r\n        label="Confirm your password"\r\n        field="confirmPassword"\r\n        schema={schema}\r\n        type="password"\r\n        maxLength={64}\r\n        required\r\n      />\r\n      <Button type="submit" variant="primary">Submit</Button>\r\n    </Form>\r\n  );\r\n};\r\n'},R={filename:"ObservationSchema.tsx",code:"import { FormSchema, watch } from '@yoskutik/mobx-form-schema';\n\nexport class ObservationSchema extends FormSchema {\n  @watch basicString = '';\n\n  @watch.array array: string[] = [];\n\n  @watch.set set = new Set<string>();\n}"},q={filename:"ObservationExample.tsx",code:"import { useMemo } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Button, TextField, ChoiceField } from '@components';\r\nimport { Form } from '../Form/Form';\r\nimport { ObservationSchema } from './ObservationSchema';\r\n\r\nexport const ObservationExample = observer(() => {\r\n  const schema = useMemo(() => ObservationSchema.create(), []);\r\n\r\n  const handleSaveClick = () => {\r\n    alert('Current state saved as initial');\r\n    schema.sync();\r\n  };\r\n\r\n  const handleResetClick = () => schema.reset();\r\n\r\n  return (\r\n    <Form schema={schema} hideValidationInfo>\r\n      <TextField schema={schema} field=\"basicString\" label=\"String value\" />\r\n      <ChoiceField\r\n        placeholder=\"Press 'Enter' or 'Space' to add item\"\r\n        label=\"Array of values\"\r\n        schema={schema}\r\n        field=\"array\"\r\n      />\r\n      <ChoiceField\r\n        placeholder=\"Press 'Enter' or 'Space' to add item\"\r\n        label=\"Set of values\"\r\n        schema={schema}\r\n        field=\"set\"\r\n      />\r\n      <div>\r\n        <Button variant=\"primary\" disabled={!schema.isChanged} onClick={handleSaveClick}>Save</Button>\r\n        <Button\r\n          disabled={!schema.isChanged}\r\n          onClick={handleResetClick}\r\n          style={{ marginLeft: 10 }}\r\n          variant=\"secondary\"\r\n        >\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  );\r\n});\r\n"},A=t(8075),U=t(1771),Y={root:"Ke6d",main:"ytm9",mainTitle:"LMac",mainSubtitle:"ZSsQ",description:"KXjj",mainDescription:"VHzn",mainLinks:"PAlq",mainLink:"cXRg",block:"j6sD",h4:"p8xg",codeExample:"w5yt"},_=t(5710),G=t(4309),H=t(1525),K=t(8520),$=function(e,r,t,a,n,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!r&&e?a.static?e:e.prototype:null,d=r||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=t.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,t[u])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=s(v.get))&&(d.get=o),(o=s(v.set))&&(d.set=o),(o=s(v.init))&&n.unshift(o)}else(o=s(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},J=function(e,r,t){for(var a=arguments.length>2,n=0;n<r.length;n++)t=a?r[n].call(e,t):r[n].call(e);return a?t:void 0};let W=(s=K.FormSchema,o=[],l=[],c=[],m=[],Z=class extends s{constructor(){super(...arguments),this.basicString=(J(this,o),J(this,l,"")),this.array=J(this,c,[]),this.set=J(this,m,new Set)}},(()=>{var e;let r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=s[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[K.watch],n=[(e=K.watch).array.bind(e)],i=[(I=K.watch).set.bind(I)],$(null,null,a,{kind:"field",name:"basicString",static:!1,private:!1,access:{has:e=>"basicString"in e,get:e=>e.basicString,set:(e,r)=>{e.basicString=r}},metadata:r},l,o),$(null,null,n,{kind:"field",name:"array",static:!1,private:!1,access:{has:e=>"array"in e,get:e=>e.array,set:(e,r)=>{e.array=r}},metadata:r},c,o),$(null,null,i,{kind:"field",name:"set",static:!1,private:!1,access:{has:e=>"set"in e,get:e=>e.set,set:(e,r)=>{e.set=r}},metadata:r},m,o),r&&Object.defineProperty(Z,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),Z),Q=(0,G.Pi)(()=>{let e=(0,N.useMemo)(()=>W.create(),[]),r=()=>{alert("Current state saved as initial"),e.sync()},t=()=>e.reset();return(0,T.BX)(H.l,{schema:e,hideValidationInfo:!0,children:[(0,T.tZ)(z.nv,{schema:e,field:"basicString",label:"String value"}),(0,T.tZ)(z.IG,{placeholder:"Press 'Enter' or 'Space' to add item",label:"Array of values",schema:e,field:"array"}),(0,T.tZ)(z.IG,{placeholder:"Press 'Enter' or 'Space' to add item",label:"Set of values",schema:e,field:"set"}),(0,T.BX)("div",{children:[(0,T.tZ)(z.zx,{variant:"primary",disabled:!e.isChanged,onClick:r,children:"Save"}),(0,T.tZ)(z.zx,{disabled:!e.isChanged,onClick:t,style:{marginLeft:10},variant:"secondary",children:"Reset"})]})]})}),ee=()=>e=>(null==e||!e.trim())&&"This field is required.",er=()=>e=>!/\S+@\S+\.\S+/.test(e)&&"Invalid email format.",et=()=>e=>!/^[a-zA-Z0-9_]+$/.test(e)&&"You can use only latin letters, digits and underscore sign.",ea=e=>r=>r.length<e&&`Should be at least ${e} characters.`;var en=function(e,r,t,a,n,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!r&&e?a.static?e:e.prototype:null,d=r||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=t.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,t[u])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=s(v.get))&&(d.get=o),(o=s(v.set))&&(d.set=o),(o=s(v.init))&&n.unshift(o)}else(o=s(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},ei=function(e,r,t){for(var a=arguments.length>2,n=0;n<r.length;n++)t=a?r[n].call(e,t):r[n].call(e);return a?t:void 0};let es=(f=K.FormSchema,p=[],v=[],b=[],y=[],B=class extends f{constructor(){super(...arguments),this.email=(ei(this,p),ei(this,v,"")),this.password=ei(this,b,""),this.shouldRememberMe=ei(this,y,!1)}},(()=>{var e;let r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=f[Symbol.metadata])&&void 0!==e?e:null):void 0;d=[(0,K.validate)(ee(),er()),K.watch],h=[(0,K.validate)(ee()),K.watch],u=[K.watch],en(null,null,d,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,r)=>{e.email=r}},metadata:r},v,p),en(null,null,h,{kind:"field",name:"password",static:!1,private:!1,access:{has:e=>"password"in e,get:e=>e.password,set:(e,r)=>{e.password=r}},metadata:r},b,p),en(null,null,u,{kind:"field",name:"shouldRememberMe",static:!1,private:!1,access:{has:e=>"shouldRememberMe"in e,get:e=>e.shouldRememberMe,set:(e,r)=>{e.shouldRememberMe=r}},metadata:r},y,p),r&&Object.defineProperty(B,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),B),eo=()=>{let e=(0,N.useMemo)(()=>es.create(),[]),r=r=>{if(r.preventDefault(),e.isValid&&e.isChanged){alert("Login succeeded!\nYour credentials temporally saved.\nYou can now try to change the form to see, how does form changes observation works."),e.sync();return}if(!e.isChanged){alert("The form is not changed");return}alert(`The form is not valid!
Errors: ${JSON.stringify(e.errors,void 0,2)}`)};return(0,T.BX)(H.l,{onSubmit:r,schema:e,children:[(0,T.tZ)(z.nv,{schema:e,field:"email",label:"E-mail"}),(0,T.tZ)(z.nv,{schema:e,field:"password",type:"password",label:"Password"}),(0,T.tZ)(z.ji,{schema:e,field:"shouldRememberMe",label:"Remember me"}),(0,T.tZ)(z.zx,{type:"submit",variant:"primary",children:"Login"})]})};var el=function(e,r,t,a,n,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!r&&e?a.static?e:e.prototype:null,d=r||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=t.length-1;u>=0;u--){var f={};for(var p in a)f[p]="access"===p?{}:a[p];for(var p in a.access)f.access[p]=a.access[p];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,t[u])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=s(v.get))&&(d.get=o),(o=s(v.set))&&(d.set=o),(o=s(v.init))&&n.unshift(o)}else(o=s(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},ec=function(e,r,t){for(var a=arguments.length>2,n=0;n<r.length;n++)t=a?r[n].call(e,t):r[n].call(e);return a?t:void 0};let em=()=>(e,r)=>e!==r.password&&"Passwords mismatched",ed=(k=K.FormSchema,F=[],E=[],C=[],O=[],P=[],L=class extends k{constructor(){super(...arguments),this.username=(ec(this,F),ec(this,E,"")),this.email=ec(this,C,""),this.password=ec(this,O,""),this.confirmPassword=ec(this,P,"")}},(()=>{var e;let r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=k[Symbol.metadata])&&void 0!==e?e:null):void 0;g=[(0,K.validate)(ee(),et()),K.watch],w=[K.validate.if(Boolean,[er()]),K.watch],S=[(0,K.validate)(ee(),ea(8)),K.watch],x=[(0,K.validate)(ee(),em()),K.watch],el(null,null,g,{kind:"field",name:"username",static:!1,private:!1,access:{has:e=>"username"in e,get:e=>e.username,set:(e,r)=>{e.username=r}},metadata:r},E,F),el(null,null,w,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,r)=>{e.email=r}},metadata:r},C,F),el(null,null,S,{kind:"field",name:"password",static:!1,private:!1,access:{has:e=>"password"in e,get:e=>e.password,set:(e,r)=>{e.password=r}},metadata:r},O,F),el(null,null,x,{kind:"field",name:"confirmPassword",static:!1,private:!1,access:{has:e=>"confirmPassword"in e,get:e=>e.confirmPassword,set:(e,r)=>{e.confirmPassword=r}},metadata:r},P,F),r&&Object.defineProperty(L,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),L),eh=()=>{let e=(0,N.useMemo)(()=>ed.create(),[]),r=r=>{if(r.preventDefault(),e.isValid){alert("Form is valid, sign up succeeded!");return}alert(`The form is not valid!
Errors: ${JSON.stringify(e.errors,void 0,2)}`)};return(0,T.BX)(H.l,{onSubmit:r,schema:e,hideObservationInfo:!0,children:[(0,T.tZ)(z.nv,{schema:e,field:"username",label:"Username",required:!0,maxLength:32}),(0,T.tZ)(z.nv,{schema:e,field:"email",label:"E-mail",type:"email",maxLength:64}),(0,T.tZ)(z.nv,{schema:e,field:"password",label:"Password",type:"password",required:!0,maxLength:64}),(0,T.tZ)(z.nv,{label:"Confirm your password",field:"confirmPassword",schema:e,type:"password",maxLength:64,required:!0}),(0,T.tZ)(z.zx,{type:"submit",variant:"primary",children:"Submit"})]})},eu=(0,N.memo)(()=>(0,T.BX)("div",{className:Y.root,children:[(0,T.BX)("section",{className:Y.main,children:[(0,T.tZ)("h2",{className:Y.mainTitle,children:"MobX Form Schema"}),(0,T.tZ)("h3",{className:Y.mainSubtitle,children:"The simple way to organize you forms!"}),(0,T.BX)("div",{className:Y.mainLinks,children:[(0,T.tZ)(z.rU,{to:"/learn",variant:"primary",className:Y.mainLink,size:"l",children:"Learn"}),(0,T.tZ)(z.rU,{to:"/reference/form-schema/create",variant:"secondary",className:Y.mainLink,size:"l",children:"Reference"})]}),(0,T.BX)("p",{className:(0,j.Z)(Y.description,Y.mainDescription),children:["MobX Form Schema allows you to describe all the form logic besides user event handling. You can easily ",(0,T.tZ)("b",{children:"validate"})," your form, ",(0,T.tZ)("b",{children:"observe"})," its changes and ",(0,T.tZ)("b",{children:"simplify"})," your communication with the backend!"]})]}),(0,T.BX)("section",{className:Y.block,children:[(0,T.tZ)("h4",{className:Y.h4,children:"Describe form's logic"}),(0,T.tZ)("p",{className:Y.description,children:"In the short example below, you can see how you can describe the logic of a login form in a React application. Although, this package doesn't depend on React, so you can use it with any other library or in vanilla JavaScript."}),(0,T.tZ)(z.KE,{items:[X,M,z.yH,z.Pe],className:Y.codeExample,children:(0,T.tZ)(eo,{})})]}),(0,T.BX)("section",{className:Y.block,children:[(0,T.tZ)("h4",{className:Y.h4,children:"Describe form's validation"}),(0,T.tZ)("p",{className:Y.description,children:"With MobX Form Schema, you can easily describe the rules of validation for your forms. Even if a field has several validation rules or the validation of one field depends on the value of another one."}),(0,T.tZ)(z.KE,{items:[V,D,z.yH,z.Pe],className:Y.codeExample,children:(0,T.tZ)(eh,{})})]}),(0,T.BX)("section",{className:Y.block,children:[(0,T.tZ)("h4",{className:Y.h4,children:"Observe form changes"}),(0,T.tZ)("p",{className:Y.description,children:"It may be useful to understand whether your form has changed or not. Especially if a form is pre-filled with data from the server. And usually, the more fields the form contains, the harder it is to understand that. But not with MobX Form Schema, because here the observation is automized!"}),(0,T.tZ)(z.KE,{className:Y.codeExample,items:[R,q,z.yH,z.d6,z.Pe],children:(0,T.tZ)(Q,{})})]}),(0,T.BX)("section",{className:Y.block,children:[(0,T.tZ)("h4",{className:Y.h4,children:"Simplify communication with backend"}),(0,T.tZ)("p",{className:Y.description,children:"With MobX Form Schema, you can simply describe how received data from the backend must be preprocessed before it is used in the form and how the data must be processed before it is sent to the backend."}),(0,T.tZ)(z.KE,{className:Y.codeExample,items:[A.Z,U.Z,z.yH,z.d6,z.Pe],children:(0,T.tZ)(_.u,{})})]}),(0,T.BX)("section",{className:Y.block,children:[(0,T.tZ)("h4",{className:Y.h4,children:"And there's more!"}),(0,T.BX)("p",{className:Y.description,children:["MobX Form Schema can be extremely helpful, especially if you have large forms with complex validation or observation logic. You can"," ",(0,T.tZ)(z.rU,{to:"",isButton:!1,children:"read more"})," ",'about what is MobX Form Schema and how to use it. And you can also explore the "Learn" and the "Reference" sections.']}),(0,T.BX)("div",{className:Y.mainLinks,children:[(0,T.tZ)(z.rU,{to:"/learn",variant:"primary",className:Y.mainLink,size:"l",children:"Learn"}),(0,T.tZ)(z.rU,{to:"/reference/form-schema/create",variant:"secondary",className:Y.mainLink,size:"l",children:"Reference"})]})]})]}));var ef=eu},1771:function(e,r){r.Z={filename:"BackendExample.tsx",code:'import { useState } from \'react\';\r\nimport { observer } from \'mobx-react\';\r\nimport { Button, ChoiceField, TextField } from \'@components\';\r\nimport { Form } from \'../Form/Form\';\r\nimport { BackendSchema } from \'./BackendSchema\';\r\n\r\nlet orderInfo = {\r\n  title: \'Pizza pepperoni\',\r\n  extraFeatures: [\r\n    \'Extra cheese\',\r\n    \'Thin dough\',\r\n  ],\r\n  email: \'yoskutik@gmail.com\',\r\n  name: \'Dima\',\r\n};\r\n\r\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nconst fakeGetOrderInfo = () => sleep(1000).then(() => orderInfo);\r\n\r\nconst fakeSetOrderInfo = (info: typeof orderInfo) => sleep(1000).then(() => {\r\n  orderInfo = info;\r\n});\r\n\r\nexport const BackendExample = observer(() => {\r\n  const [schema, setSchema] = useState(() => BackendSchema.create());\r\n\r\n  const handleSaveClick = async () => {\r\n    if (schema.isChanged) {\r\n      await fakeSetOrderInfo(schema.presentation as typeof orderInfo).then(() => {\r\n        alert(\'Order info is saved!\');\r\n        schema.sync();\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    alert(\'The form is not changed\');\r\n  };\r\n\r\n  const handleGetInfoClick = () => fakeGetOrderInfo()\r\n    .then(data => setSchema(BackendSchema.create(data)));\r\n\r\n  return (\r\n    <Form schema={schema} hideValidationInfo>\r\n      <TextField schema={schema} field="title" label="Product title" />\r\n      <ChoiceField schema={schema} field="extraFeatures" label="Extra features" />\r\n      <TextField schema={schema} field="name" label="Your name" />\r\n      <TextField schema={schema} field="email" type="email" label="Your email" />\r\n      <TextField schema={schema} field="email" type="email" label="Confirm your email" />\r\n      <div>\r\n        <Button variant="primary" onClick={handleSaveClick} disabled={!schema.isChanged}>\r\n          Save info\r\n        </Button>\r\n        <Button variant="secondary" onClick={handleGetInfoClick} style={{ marginLeft: 10 }}>\r\n          Get info\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  );\r\n});\r\n'}},8075:function(e,r){r.Z={filename:"BackendSchema.ts",code:"import { factory, FormSchema, presentation, watch } from '@yoskutik/mobx-form-schema';\r\n\r\nconst presentName = (value: string) => value\r\n  .split(' ')\r\n  .map(it => (it ? it[0].toUpperCase() + it.substring(1).toLowerCase() : it))\r\n  .join(' ');\r\n\r\nconst createConfirmEmail = (_: string, schema: BackendSchema) => schema.email;\r\n\r\nconst createExtraFeatures = (value: string[]) => new Set(value);\r\n\r\nexport class BackendSchema extends FormSchema {\r\n  @watch title = '';\r\n\r\n  // If received value from backend must be preprocessed before usage,\r\n  //  you can use @factory decorator\r\n  @factory(createExtraFeatures) // or @factory.set\r\n  @watch.set extraFeatures = new Set<string>();\r\n\r\n  // If you have to process the value before sending to backend,\r\n  //  you can use @presentation decorator\r\n  @presentation(presentName)\r\n  @watch name = '';\r\n\r\n  @watch email = '';\r\n\r\n  // With @presentation decorator you can even entirely cut off the value\r\n  //  from the form presentation, which can be used as backend request body.\r\n  @presentation.hidden\r\n  @factory(createConfirmEmail)\r\n  @watch confirmEmail = '';\r\n}\r\n"}},4593:function(e,r,t){t.d(r,{FormSchema:function(){return X},factory:function(){return J},nestedSchema:function(){return ei},nestedSchemasArray:function(){return es},presentation:function(){return er},validate:function(){return Z},watch:function(){return $}});var a,n,i,s=t(75);let o=e=>Symbol(e),l=o(),c=o(),m=o("InitialValues"),d=o("Errors"),h=o("ChangedKeys"),u=o(),f=o(),p=o(),v=o(),b=Object,y="comparator",g="presentation",w="schema",S="schemasArray",x=b.keys,k=new WeakMap,F=(e,r="string")=>typeof e===r,E=e=>k.get(e),C=(e,r,t)=>(t=(t=E(r))&&t[e])?t:(t=F(t=b.getPrototypeOf(r),"object")?t:null)?C(e,t):void 0,O=(e,r)=>C(e,r)||{},P=(e,r,t,a,n,i)=>{r&&(F(t)||F(t,"symbol"))?((n=O(e,r))[p]!==r&&(n=b.assign({},n)),n[t]=a,n[p]=r,(E(r)||k.set(r,{})&&E(r))[e]=n):t.addInitializer(function(){P(e,this,t.name,a)})},Z=(...e)=>(r,t)=>P(c,r,t,{validators:e});Z.if=(e,r)=>(t,a)=>P(c,t,a,{validators:r,condition:e});let I=(e,r,t)=>H(x(e).concat(x(r))).forEach(e=>t(e)),B=(e,r,t,a)=>!!r[t]&&((!r[t].condition||r[t].condition(e[t],e))&&r[t].validators.find(r=>a=r(e[t],e)),(0,s.z)(()=>F(a)||!0===a?e[d][t]=a:delete e[d][t]),a),L=(e,r,t,a)=>(a=!r[t]||r[t][y](e[t],e[m][t],e,t),(0,s.z)(()=>e[h][a?"delete":"add"](t)),!a),T=(e,r,t,a)=>x(a=O(r,e)).reduce((r,n)=>!!t(e,a,n)||r,!1),N=(e,r,t,a)=>x(a=O(l,e)).forEach(n=>t(e,n,a[n][r])),j=e=>{e[v]&&(e.updateIsValidAll(),e.updateIsChangedAny())},z=(e,r)=>x(e).forEach(e=>r(e));class X{static create(e={},r){let t=new this(e),a=O(u,t),n=O(c,t),i=O(l,t),o={[m]:s.LO.ref,[h]:s.LO,[d]:s.LO,[g]:s.Fl,isChanged:s.Fl,isValid:s.Fl,errors:s.Fl,updateIsPropertyChanged:s.aD,updateIsPropertyValid:s.aD,updateIsChangedAny:s.aD,updateIsValidAll:s.aD,reset:s.aD,sync:s.aD};I(a,e,r=>{a[r]?t[r]=a[r](e[r],e,t,t[r]):r in e&&(t[r]=e[r])}),z(i,(e,r,a)=>{(0,s.wn)(t,e)||(r=s.LO,(a=i[e][y])===D||a===q?r=s.LO.ref:(a===_||a===Y||a===U)&&(r=s.LO.shallow),o[e]=r)});try{(0,s.rC)(t,o)}catch(e){z(o,e=>!(0,s.wn)(t,e)&&o[e](t,e)),(0,s.rC)(t)}return t.sync(),t[v]=r,r||(z(i,(e,r)=>(0,s.N7)(t,e,()=>(r&&r(),r=(0,s.EH)(()=>L(t,i,e))),!0)),z(n,e=>(0,s.EH)(()=>B(t,n,e)))),t.onInit&&t.onInit(),t}get presentation(){let e={},r=this,t=O(f,r);return I(t,r,(a,n)=>{(n=t[a])&&n.hidden||(e[a]=n&&n[g]?n[g](r[a],r):r[a])}),e}get isChanged(){return this[h].size>0}get isValid(){return b.values(this[d]).every(e=>!e)}get errors(){return this[d]}get changedProperties(){return this[h]}getInitial(e){return this[m][e]}sync(){let e={};N(this,"saveFn",(r,t,a)=>e[t]=a(r[t],r)),this[m]=e,j(this)}reset(){N(this,"restoreFn",(e,r,t)=>e[r]=t(e[m][r],e)),j(this)}updateIsPropertyValid(e){return B(this,O(c,this),e)}updateIsValidAll(){return T(this,c,B)}updateIsPropertyChanged(e){return L(this,O(l,this),e)}updateIsChangedAny(){return T(this,l,L)}constructor(){this[a]={},this[n]=H(),this[i]={}}}a=d,n=h,i=m;let M=e=>(e&&e.sync(),e),V=e=>(e&&e.reset(),e),D=(e,r,t,a,n,i)=>(!e||!e.isChanged)&&(e===r||!!e&&!!r&&e.constructor===r.constructor&&((i=x(n=O(l,e)).find(t=>!n[t][y](e[t],r[t],e)))&&(0,s.z)(()=>e[m]=r[m]),!i)),R=e=>(r,t,a,n)=>!!(t&&r?t.length===r.length&&r.every((r,i)=>e(r,t[i],a,n)):t===r),q=(e,r)=>e===r,A=e=>e,U=R(D),Y=(e,r,t,a)=>!!(e&&r&&e.size===r.size&&Array.from(e).every(e=>r.has(e))),_=R(q),G=e=>e.slice(),H=e=>new Set(e),K=(e,r,t)=>{let a=(a,n)=>P(l,a,n,{[y]:e,saveFn:r,restoreFn:t});return a[y]=e,a},$=K(q,A,A);$.configure=K,$[w]=K(D,M,V),$[S]=K(U,e=>e?e.map(M):e,e=>e?e.map(V):e),$.array=K(_,G,G),$.set=K(Y,H,H);let J=e=>(r,t)=>P(u,r,t,e),W=(e,r)=>r?e.create(r):r,Q=e=>(r,t)=>J((a,n,i,s)=>(r&&F(t)?t:t.name)in n?e(a,n,i,s):s)(r,t);J[w]=e=>Q(r=>W(e,r)),J[S]=e=>Q(r=>r?r.map(r=>W(e,r)):r),J.set=Q(H);let ee=e=>(r,t)=>P(f,r,t,e),er=e=>ee({[g]:e});er.hidden=ee({hidden:!0});let et=(e,r,t,a,n,i)=>(Z(t)(e,r),a(e,r),n(e,r),er(i)(e,r)),ea=e=>!e.isValid,en=e=>e[g],ei=e=>(r,t)=>et(r,t,ea,$[w],J[w](e),en),es=e=>(r,t)=>et(r,t,e=>e.some(ea),$[S],J[S](e),e=>e.map(en))},8520:function(e,r,t){e.exports=t(4593)}}]);