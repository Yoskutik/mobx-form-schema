"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[915],{8994:function(e,t){t.Z={page:"zXdh",link:"gQ1t"}},4915:function(e,t,r){let a,n,s,i,o,l,c,m,d,h,u,p,f,v,y,b,x,S,k,g,w,N,E,C,T,F,B,V,I,Z,M,A,P,D;r.r(t),r.d(t,{default:function(){return eM}});var Y,O,q,z=r(8993),R=r(1568),X={filename:"NestedSchemaIntroduceSchema.ts",code:"import { FormSchema, nestedSchema } from '@yoskutik/mobx-form-schema';\r\n\r\nclass NestedSchema extends FormSchema {\r\n  prop1 = 1;\r\n}\r\n\r\nexport class NestedSchemaIntroduceSchema extends FormSchema {\r\n  // Just an alias for this:\r\n  //  @validate(schema => !schema.isValid)\r\n  //  @watch.schema\r\n  //  @factory.schema(NestedSchema)\r\n  //  @presentation(schema => schema.presentation)\r\n  @nestedSchema(NestedSchema)\r\n  nestedSchema = NestedSchema.create();\r\n}\r\n"},j={filename:"NestedSchemasArrayIntroduceSchema.ts",code:"import { FormSchema, nestedSchemasArray } from '@yoskutik/mobx-form-schema';\r\n\r\nclass NestedSchema extends FormSchema {\r\n  prop1 = 1;\r\n}\r\n\r\nexport class NestedSchemasArrayIntroduceSchema extends FormSchema {\r\n  // Just an alias for this:\r\n  //  @validate(schemas => schemas.some(schema => !schema.isValid))\r\n  //  @watch.schemasArray\r\n  //  @factory.schemasArray(NestedSchema)\r\n  //  @presentation(schemas => schemas.map(schema => schema.presentation))\r\n  @nestedSchemasArray(NestedSchema)\r\n  nestedSchema = [NestedSchema.create()];\r\n}\r\n"},_={filename:"CVSchema.ts",code:"import { FormSchema, nestedSchema, nestedSchemasArray, validate, watch } from '@yoskutik/mobx-form-schema';\r\nimport { ContactsSchema } from './ContactsSchema';\r\nimport { ExperienceSchema } from './ExperienceSchema';\r\nimport { required } from './validators';\r\n\r\nexport class CVSchema extends FormSchema {\r\n  @validate(required())\r\n  @watch name = '';\r\n\r\n  @validate(required())\r\n  @watch surname = '';\r\n\r\n  @nestedSchema(ContactsSchema)\r\n  contacts = ContactsSchema.create();\r\n\r\n  @nestedSchemasArray(ExperienceSchema)\r\n  experience = [\r\n    ExperienceSchema.create({\r\n      position: 'Frontend Developer',\r\n      company: 'Big Company',\r\n    }),\r\n  ];\r\n}\r\n"},W={filename:"ContactsSchema.ts",code:"import { FormSchema, validate, watch } from '@yoskutik/mobx-form-schema';\r\nimport { required, email } from './validators';\r\n\r\nexport class ContactsSchema extends FormSchema {\r\n  @validate(required(), email())\r\n  @watch email = '';\r\n\r\n  @watch tel = '';\r\n}\r\n"},J={filename:"ExperienceSchema.ts",code:"import { FormSchema, presentation, validate, watch } from '@yoskutik/mobx-form-schema';\r\nimport { defined, maxValue, minValue, required } from './validators';\r\n\r\nconst CURRENT_YEAR = new Date().getFullYear();\r\nconst CURRENT_MONTH = new Date().getMonth() + 1;\r\n\r\nconst upToPresent = (monthPropertyName: 'endMonth' | 'startMonth') => (\r\n  (year: number, schema: ExperienceSchema) => {\r\n    if (CURRENT_YEAR < year || (CURRENT_YEAR === year && CURRENT_MONTH < schema[monthPropertyName])) {\r\n      return 'The date must be up to present.';\r\n    }\r\n    return false;\r\n  }\r\n);\r\n\r\nconst startYearUpToEndYear = () => (\r\n  (startYear: number, { endMonth, endYear, startMonth, stillWorkThere }: ExperienceSchema) => {\r\n    if (stillWorkThere || !endYear) return false;\r\n    if (endYear > startYear || (endMonth && endYear === startYear && endMonth >= startMonth)) {\r\n      return false;\r\n    }\r\n    return 'The start date must be before the end date.';\r\n  }\r\n);\r\n\r\nconst shouldValidateEnd = (_: unknown, schema: ExperienceSchema) => !schema.stillWorkThere;\r\n\r\nconst presentEndDate = (value: number, schema: ExperienceSchema) => (\r\n  schema.stillWorkThere ? undefined : value\r\n);\r\n\r\nexport class ExperienceSchema extends FormSchema {\r\n  @presentation.hidden\r\n  id = Math.random();\r\n\r\n  @validate(required())\r\n  @watch position = '';\r\n\r\n  @validate(required())\r\n  @watch company = '';\r\n\r\n  @validate(defined(), minValue(1), maxValue(12))\r\n  @watch startMonth: number | undefined = undefined;\r\n\r\n  @validate(\r\n    defined(),\r\n    minValue(1950),\r\n    maxValue(CURRENT_YEAR),\r\n    upToPresent('startMonth'),\r\n    startYearUpToEndYear(),\r\n  )\r\n  @watch startYear: number | undefined = undefined;\r\n\r\n  @presentation(presentEndDate)\r\n  @validate.if(shouldValidateEnd, [defined(), minValue(1), maxValue(12)])\r\n  @watch endMonth: number | undefined = undefined;\r\n\r\n  @presentation(presentEndDate)\r\n  @validate.if(shouldValidateEnd, [\r\n    defined(),\r\n    minValue(1950),\r\n    maxValue(CURRENT_YEAR),\r\n    upToPresent('endMonth'),\r\n  ])\r\n  @watch endYear: number | undefined = undefined;\r\n\r\n  @watch stillWorkThere = false;\r\n}\r\n"},U={filename:"validators.ts",code:"export const required = () => (value?: string) => {\r\n  if (value?.trim()) return false;\r\n  return 'This field is required.';\r\n};\r\n\r\nexport const defined = () => (value?: unknown) => {\r\n  if (value !== null && value !== undefined) return false;\r\n  return 'This field is required.';\r\n};\r\n\r\nexport const minValue = (min: number) => (value: number) => {\r\n  if (value >= min) return false;\r\n  return `The value must be at least ${min}`;\r\n};\r\n\r\nexport const maxValue = (max: number) => (value: number) => {\r\n  if (value <= max) return false;\r\n  return `The value must be not more than ${max}`;\r\n};\r\n\r\nexport const email = () => (value: string) => {\r\n  if (/\\S+@\\S+\\.\\S+/.test(value)) return false;\r\n  return 'Invalid email format.';\r\n};\r\n"},H={filename:"CVExample.tsx",code:'import { observer } from \'mobx-react\';\r\nimport { FormEvent, useMemo, useState } from \'react\';\r\nimport { action } from \'mobx\';\r\nimport { Button, TextField } from \'@components\';\r\nimport { ExperienceSchema } from \'./ExperienceSchema\';\r\nimport { CVSchema } from \'./CVSchema\';\r\nimport { ExperienceBlock } from \'./ExperienceBlock\';\r\nimport styles from \'./CVExample.module.scss\';\r\nimport { CVExampleInformer } from \'./CVExampleInformer\';\r\n\r\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nexport const CVExample = observer(() => {\r\n  const [schema, setSchema] = useState(() => CVSchema.create());\r\n\r\n  const restoreFromFakeApiClick = () =>\r\n    sleep(500).then(() => {\r\n      const rawData = sessionStorage.getItem(\'complete-example/raw\');\r\n      if (!rawData) {\r\n        alert(\'State has\\\'t been saved yet\');\r\n        return;\r\n      }\r\n      const data = JSON.parse(rawData);\r\n      setSchema(() => CVSchema.create(data));\r\n    });\r\n\r\n  const handleAddItemClick = action(() => {\r\n    schema.experience.push(ExperienceSchema.create());\r\n  });\r\n\r\n  const handleDeleteItemClick = action((i: number) => {\r\n    schema.experience.splice(i, 1);\r\n  });\r\n\r\n  const handleSubmit = async (evt: FormEvent) => {\r\n    evt.preventDefault();\r\n    const data = JSON.stringify(schema.presentation);\r\n    sessionStorage.setItem(\'complete-example/raw\', data);\r\n    alert(\'State has been saved\');\r\n  };\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      <form className={styles.form} id="unique-form-id" onSubmit={handleSubmit} noValidate>\r\n        <div className={styles.left}>\r\n          <b className={styles.title}>Resume:</b>\r\n          <TextField schema={schema} field="name" label="Name" />\r\n          <TextField schema={schema} field="surname" label="Surname" />\r\n\r\n          <div className={styles.contacts}>\r\n            <b className={styles.title}>Contacts:</b>\r\n            <TextField schema={schema.contacts} field="email" type="email" label="E-mail" />\r\n            <TextField schema={schema.contacts} field="tel" type="tel" label="Phone number" />\r\n          </div>\r\n        </div>\r\n        <div className={styles.experience}>\r\n          <b className={styles.title}>Experience:</b>\r\n          {schema.experience.map((item, i) => (\r\n            <ExperienceBlock schema={item} onDelete={handleDeleteItemClick} key={item.id} index={i} />\r\n          ))}\r\n          <Button variant="secondary" onClick={handleAddItemClick} className={styles.addBtn}>\r\n            Add experience block\r\n          </Button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className={styles.buttons}>\r\n        <Button variant="primary" onClick={() => schema.reset()} disabled={!schema.isChanged}>\r\n          Restore locally\r\n        </Button>\r\n        <Button variant="primary" onClick={restoreFromFakeApiClick}>\r\n          Restore from fake API\r\n        </Button>\r\n        <Button type="submit" form="unique-form-id" variant="primary">\r\n          Save to fake API\r\n        </Button>\r\n      </div>\r\n\r\n      <CVExampleInformer schema={schema} />\r\n    </div>\r\n  );\r\n});\r\n'},K={filename:"CVExampleInformer.tsx",code:"import { observer } from 'mobx-react';\r\nimport clsx from 'clsx';\r\nimport { CVSchema } from './CVSchema';\r\nimport styles from './CVExampleInformer.module.scss';\r\n\r\nconst Block = observer(({ title, data }: { title: string, data: unknown }) => (\r\n  <div className={styles.item}>\r\n    <b className={styles.title}>{title}</b>\r\n    <div className={styles.pre}>\r\n      {JSON.stringify(data, undefined, 2)}\r\n    </div>\r\n  </div>\r\n));\r\n\r\ntype Props = {\r\n  schema: CVSchema;\r\n};\r\n\r\nexport const CVExampleInformer = observer(({ schema }: Props) => (\r\n  <div className={styles.root}>\r\n    <Block title=\"Current state\" data={schema.presentation} />\r\n    <div className={clsx(styles.item, styles.item_errors)}>\r\n      <Block title=\"Errors main schema\" data={schema.errors} />\r\n      <Block title=\"Errors contacts schema\" data={schema.contacts.errors} />\r\n      {schema.experience.map((it, i) => (\r\n        <Block title={`Errors experience[${i}] schema`} data={it.errors} key={it.id} />\r\n      ))}\r\n    </div>\r\n  </div>\r\n));\r\n"},$={filename:"ExperienceBlock.tsx",code:'import { observer } from \'mobx-react\';\r\nimport { Button, CheckboxField, NumberField, TextField } from \'@components\';\r\nimport { Delete } from \'../Delete\';\r\nimport styles from \'./ExperienceBlock.module.scss\';\r\nimport { ExperienceSchema } from \'./ExperienceSchema\';\r\n\r\ntype Props = {\r\n  schema: ExperienceSchema;\r\n  onDelete: (index: number) => void;\r\n  index: number;\r\n};\r\n\r\nexport const ExperienceBlock = observer(({ schema, onDelete, index }: Props) => (\r\n  <div className={styles.root}>\r\n    <Button variant="secondary" onClick={() => onDelete(index)} size="s">\r\n      <Delete />\r\n    </Button>\r\n\r\n    <div className={styles.body}>\r\n      <b className={styles.title}>\r\n        {index + 1}. {schema.company && `At ${schema.company}`}\r\n      </b>\r\n\r\n      <TextField schema={schema} field="position" label="Position" required />\r\n\r\n      <TextField schema={schema} field="company" label="Company" required />\r\n\r\n      <div className={styles.dates}>\r\n        <NumberField schema={schema} field="startMonth" label="Start month" required className={styles.dateField} />\r\n        <NumberField schema={schema} field="startYear" label="year" required className={styles.dateField} />\r\n      </div>\r\n\r\n      {!schema.stillWorkThere && (\r\n        <div className={styles.dates}>\r\n          <NumberField schema={schema} field="endMonth" label="End month" required className={styles.dateField} />\r\n          <NumberField schema={schema} field="endYear" label="year" required className={styles.dateField} />\r\n        </div>\r\n      )}\r\n\r\n      <CheckboxField schema={schema} field="stillWorkThere" label="Still work there" />\r\n    </div>\r\n  </div>\r\n));\r\n'},L=r(8994),Q=r(4309),G=r(8379),ee=r(75),et=r(8520);let er=()=>e=>(null==e||!e.trim())&&"This field is required.",ea=()=>e=>null==e&&"This field is required.",en=e=>t=>!(t>=e)&&`The value must be at least ${e}`,es=e=>t=>!(t<=e)&&`The value must be not more than ${e}`,ei=()=>e=>!/\S+@\S+\.\S+/.test(e)&&"Invalid email format.";var eo=function(e,t,r,a,n,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!t&&e?a.static?e:e.prototype:null,d=t||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=r.length-1;u>=0;u--){var p={};for(var f in a)p[f]="access"===f?{}:a[f];for(var f in a.access)p.access[f]=a.access[f];p.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var v=(0,r[u])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=i(v.get))&&(d.get=o),(o=i(v.set))&&(d.set=o),(o=i(v.init))&&n.unshift(o)}else(o=i(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},el=function(e,t,r){for(var a=arguments.length>2,n=0;n<t.length;n++)r=a?t[n].call(e,r):t[n].call(e);return a?r:void 0};let ec=new Date().getFullYear(),em=new Date().getMonth()+1,ed=e=>(t,r)=>(ec<t||ec===t&&em<r[e])&&"The date must be up to present.",eh=()=>(e,{endMonth:t,endYear:r,startMonth:a,stillWorkThere:n})=>!n&&!!r&&!(r>e)&&(!t||r!==e||!(t>=a))&&"The start date must be before the end date.",eu=(e,t)=>!t.stillWorkThere,ep=(e,t)=>t.stillWorkThere?void 0:e,ef=(d=et.FormSchema,h=[],u=[],p=[],f=[],v=[],y=[],b=[],x=[],S=[],Y=class extends d{constructor(){super(...arguments),this.id=(el(this,h),el(this,u,Math.random())),this.position=el(this,p,""),this.company=el(this,f,""),this.startMonth=el(this,v,void 0),this.startYear=el(this,y,void 0),this.endMonth=el(this,b,void 0),this.endYear=el(this,x,void 0),this.stillWorkThere=el(this,S,!1)}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=d[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[(e=et.presentation).hidden.bind(e)],n=[(0,et.validate)(er()),et.watch],s=[(0,et.validate)(er()),et.watch],i=[(0,et.validate)(ea(),en(1),es(12)),et.watch],o=[(0,et.validate)(ea(),en(1950),es(ec),ed("startMonth"),eh()),et.watch],l=[(0,et.presentation)(ep),et.validate.if(eu,[ea(),en(1),es(12)]),et.watch],c=[(0,et.presentation)(ep),et.validate.if(eu,[ea(),en(1950),es(ec),ed("endMonth")]),et.watch],m=[et.watch],eo(null,null,a,{kind:"field",name:"id",static:!1,private:!1,access:{has:e=>"id"in e,get:e=>e.id,set:(e,t)=>{e.id=t}},metadata:t},u,h),eo(null,null,n,{kind:"field",name:"position",static:!1,private:!1,access:{has:e=>"position"in e,get:e=>e.position,set:(e,t)=>{e.position=t}},metadata:t},p,h),eo(null,null,s,{kind:"field",name:"company",static:!1,private:!1,access:{has:e=>"company"in e,get:e=>e.company,set:(e,t)=>{e.company=t}},metadata:t},f,h),eo(null,null,i,{kind:"field",name:"startMonth",static:!1,private:!1,access:{has:e=>"startMonth"in e,get:e=>e.startMonth,set:(e,t)=>{e.startMonth=t}},metadata:t},v,h),eo(null,null,o,{kind:"field",name:"startYear",static:!1,private:!1,access:{has:e=>"startYear"in e,get:e=>e.startYear,set:(e,t)=>{e.startYear=t}},metadata:t},y,h),eo(null,null,l,{kind:"field",name:"endMonth",static:!1,private:!1,access:{has:e=>"endMonth"in e,get:e=>e.endMonth,set:(e,t)=>{e.endMonth=t}},metadata:t},b,h),eo(null,null,c,{kind:"field",name:"endYear",static:!1,private:!1,access:{has:e=>"endYear"in e,get:e=>e.endYear,set:(e,t)=>{e.endYear=t}},metadata:t},x,h),eo(null,null,m,{kind:"field",name:"stillWorkThere",static:!1,private:!1,access:{has:e=>"stillWorkThere"in e,get:e=>e.stillWorkThere,set:(e,t)=>{e.stillWorkThere=t}},metadata:t},S,h),t&&Object.defineProperty(Y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),Y);var ev=function(e,t,r,a,n,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!t&&e?a.static?e:e.prototype:null,d=t||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=r.length-1;u>=0;u--){var p={};for(var f in a)p[f]="access"===f?{}:a[f];for(var f in a.access)p.access[f]=a.access[f];p.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var v=(0,r[u])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=i(v.get))&&(d.get=o),(o=i(v.set))&&(d.set=o),(o=i(v.init))&&n.unshift(o)}else(o=i(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},ey=function(e,t,r){for(var a=arguments.length>2,n=0;n<t.length;n++)r=a?t[n].call(e,r):t[n].call(e);return a?r:void 0};let eb=(w=et.FormSchema,N=[],E=[],C=[],O=class extends w{constructor(){super(...arguments),this.email=(ey(this,N),ey(this,E,"")),this.tel=ey(this,C,"")}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=w[Symbol.metadata])&&void 0!==e?e:null):void 0;k=[(0,et.validate)(er(),ei()),et.watch],g=[et.watch],ev(null,null,k,{kind:"field",name:"email",static:!1,private:!1,access:{has:e=>"email"in e,get:e=>e.email,set:(e,t)=>{e.email=t}},metadata:t},E,N),ev(null,null,g,{kind:"field",name:"tel",static:!1,private:!1,access:{has:e=>"tel"in e,get:e=>e.tel,set:(e,t)=>{e.tel=t}},metadata:t},C,N),t&&Object.defineProperty(O,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),O);var ex=function(e,t,r,a,n,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,c="getter"===l?"get":"setter"===l?"set":"value",m=!t&&e?a.static?e:e.prototype:null,d=t||(m?Object.getOwnPropertyDescriptor(m,a.name):{}),h=!1,u=r.length-1;u>=0;u--){var p={};for(var f in a)p[f]="access"===f?{}:a[f];for(var f in a.access)p.access[f]=a.access[f];p.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var v=(0,r[u])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=i(v.get))&&(d.get=o),(o=i(v.set))&&(d.set=o),(o=i(v.init))&&n.unshift(o)}else(o=i(v))&&("field"===l?n.unshift(o):d[c]=o)}m&&Object.defineProperty(m,a.name,d),h=!0},eS=function(e,t,r){for(var a=arguments.length>2,n=0;n<t.length;n++)r=a?t[n].call(e,r):t[n].call(e);return a?r:void 0};let ek=(I=et.FormSchema,Z=[],M=[],A=[],P=[],D=[],q=class extends I{constructor(){super(...arguments),this.name=(eS(this,Z),eS(this,M,"")),this.surname=eS(this,A,""),this.contacts=eS(this,P,eb.create()),this.experience=eS(this,D,[ef.create({position:"Frontend Developer",company:"Big Company"})])}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=I[Symbol.metadata])&&void 0!==e?e:null):void 0;T=[(0,et.validate)(er()),et.watch],F=[(0,et.validate)(er()),et.watch],B=[(0,et.nestedSchema)(eb)],V=[(0,et.nestedSchemasArray)(ef)],ex(null,null,T,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:t},M,Z),ex(null,null,F,{kind:"field",name:"surname",static:!1,private:!1,access:{has:e=>"surname"in e,get:e=>e.surname,set:(e,t)=>{e.surname=t}},metadata:t},A,Z),ex(null,null,B,{kind:"field",name:"contacts",static:!1,private:!1,access:{has:e=>"contacts"in e,get:e=>e.contacts,set:(e,t)=>{e.contacts=t}},metadata:t},P,Z),ex(null,null,V,{kind:"field",name:"experience",static:!1,private:!1,access:{has:e=>"experience"in e,get:e=>e.experience,set:(e,t)=>{e.experience=t}},metadata:t},D,Z),t&&Object.defineProperty(q,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),q);var eg=r(6656),ew={root:"T_TS",body:"qxz3",title:"JCYE",dates:"KiJI",dateField:"Ltan"};let eN=(0,Q.Pi)(({schema:e,onDelete:t,index:r})=>(0,z.BX)("div",{className:ew.root,children:[(0,z.tZ)(R.zx,{variant:"secondary",onClick:()=>t(r),size:"s",children:(0,z.tZ)(eg.H,{})}),(0,z.BX)("div",{className:ew.body,children:[(0,z.BX)("b",{className:ew.title,children:[r+1,". ",e.company&&`At ${e.company}`]}),(0,z.tZ)(R.nv,{schema:e,field:"position",label:"Position",required:!0}),(0,z.tZ)(R.nv,{schema:e,field:"company",label:"Company",required:!0}),(0,z.BX)("div",{className:ew.dates,children:[(0,z.tZ)(R.Ki,{schema:e,field:"startMonth",label:"Start month",required:!0,className:ew.dateField}),(0,z.tZ)(R.Ki,{schema:e,field:"startYear",label:"year",required:!0,className:ew.dateField})]}),!e.stillWorkThere&&(0,z.BX)("div",{className:ew.dates,children:[(0,z.tZ)(R.Ki,{schema:e,field:"endMonth",label:"End month",required:!0,className:ew.dateField}),(0,z.tZ)(R.Ki,{schema:e,field:"endYear",label:"year",required:!0,className:ew.dateField})]}),(0,z.tZ)(R.ji,{schema:e,field:"stillWorkThere",label:"Still work there"})]})]}));var eE={root:"WlBM",form:"HCd1",left:"WCSq",title:"WpjE",contacts:"QaBh",experience:"HqNX",addBtn:"THX2",buttons:"kI3F"},eC=r(6277),eT={root:"UbEC",item:"w5m5",item_errors:"JAS8",title:"PTts",pre:"nJRv"};let eF=(0,Q.Pi)(({title:e,data:t})=>(0,z.BX)("div",{className:eT.item,children:[(0,z.tZ)("b",{className:eT.title,children:e}),(0,z.tZ)("div",{className:eT.pre,children:JSON.stringify(t,void 0,2)})]})),eB=(0,Q.Pi)(({schema:e})=>(0,z.BX)("div",{className:eT.root,children:[(0,z.tZ)(eF,{title:"Current state",data:e.presentation}),(0,z.BX)("div",{className:(0,eC.Z)(eT.item,eT.item_errors),children:[(0,z.tZ)(eF,{title:"Errors main schema",data:e.errors}),(0,z.tZ)(eF,{title:"Errors contacts schema",data:e.contacts.errors}),e.experience.map((e,t)=>(0,z.tZ)(eF,{title:`Errors experience[${t}] schema`,data:e.errors},e.id))]})]})),eV=e=>new Promise(t=>setTimeout(t,e)),eI=(0,Q.Pi)(()=>{let[e,t]=(0,G.useState)(()=>ek.create()),r=()=>eV(500).then(()=>{let e=sessionStorage.getItem("complete-example/raw");if(!e){alert("State has't been saved yet");return}let r=JSON.parse(e);t(()=>ek.create(r))}),a=(0,ee.aD)(()=>{e.experience.push(ef.create())}),n=(0,ee.aD)(t=>{e.experience.splice(t,1)}),s=t=>{var r,a,n,s;return r=void 0,a=void 0,n=void 0,s=function*(){t.preventDefault();let r=JSON.stringify(e.presentation);sessionStorage.setItem("complete-example/raw",r),alert("State has been saved")},new(n||(n=Promise))(function(e,t){function i(e){try{l(s.next(e))}catch(e){t(e)}}function o(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(r,a||[])).next())})};return(0,z.BX)("div",{className:eE.root,children:[(0,z.BX)("form",{className:eE.form,id:"unique-form-id",onSubmit:s,noValidate:!0,children:[(0,z.BX)("div",{className:eE.left,children:[(0,z.tZ)("b",{className:eE.title,children:"Resume:"}),(0,z.tZ)(R.nv,{schema:e,field:"name",label:"Name"}),(0,z.tZ)(R.nv,{schema:e,field:"surname",label:"Surname"}),(0,z.BX)("div",{className:eE.contacts,children:[(0,z.tZ)("b",{className:eE.title,children:"Contacts:"}),(0,z.tZ)(R.nv,{schema:e.contacts,field:"email",type:"email",label:"E-mail"}),(0,z.tZ)(R.nv,{schema:e.contacts,field:"tel",type:"tel",label:"Phone number"})]})]}),(0,z.BX)("div",{className:eE.experience,children:[(0,z.tZ)("b",{className:eE.title,children:"Experience:"}),e.experience.map((e,t)=>(0,z.tZ)(eN,{schema:e,onDelete:n,index:t},e.id)),(0,z.tZ)(R.zx,{variant:"secondary",onClick:a,className:eE.addBtn,children:"Add experience block"})]})]}),(0,z.BX)("div",{className:eE.buttons,children:[(0,z.tZ)(R.zx,{variant:"primary",onClick:()=>e.reset(),disabled:!e.isChanged,children:"Restore locally"}),(0,z.tZ)(R.zx,{variant:"primary",onClick:r,children:"Restore from fake API"}),(0,z.tZ)(R.zx,{type:"submit",form:"unique-form-id",variant:"primary",children:"Save to fake API"})]}),(0,z.tZ)(eB,{schema:e})]})}),eZ=()=>(0,z.BX)(R.$0,{title:"A complete example of MobX Form Schema",children:[(0,z.tZ)(R.xv,{children:"This is a complete example of all the MobX Form Schema features. Here you can see the usage of all the decorators."}),(0,z.BX)(R.xv,{children:["But before the diving, we want to introduce 2 extra small decorators: the ",(0,z.tZ)(R.EK,{children:"@nestedSchema"})," and the ",(0,z.tZ)(R.EK,{children:"@nestedSchemasArray"})," decorators. All they do is replace several decorators with a single one."]}),(0,z.tZ)(R.KE,{items:[X,j]}),(0,z.BX)(R.$0,{title:"And now you are completely ready!",children:[(0,z.tZ)(R.xv,{children:"Let's create a form for a CV. It must have all the validation, and there must be an opportunity to save the state of the form. Since, we won't use a backend, the state will be saved in session storage. Also, there must be a way to restore data from the storage."}),(0,z.BX)(R.xv,{children:["Besides, for your convenience, we uploaded this code into several sandboxes, so if you want to play with it, you can visit "," ",(0,z.tZ)(R.rU,{to:"https://codesandbox.io/s/silent-morning-68myz9?file=/src/index.tsx",className:L.Z.link,children:"CodeSandbox.io"})," or "," ",(0,z.tZ)(R.rU,{to:"https://stackblitz.com/edit/stackblitz-starters-g7hrxn?file=src%2Findex.tsx",className:L.Z.link,children:"StackBlitz.com"}),"."]}),(0,z.tZ)(R.KE,{items:[_,W,J,U,H,K,$],height:600}),(0,z.tZ)(eI,{})]})]});var eM=eZ},6656:function(e,t,r){r.d(t,{H:function(){return n}});var a=r(8993);let n=()=>(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,a.tZ)("path",{d:"M10 12v5M14 12v5M4 7h16M6 10v8a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-8M9 5c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2H9V5Z",strokeLinecap:"round",stroke:"currentColor",strokeWidth:"2"})})},4593:function(e,t,r){r.d(t,{FormSchema:function(){return Y},factory:function(){return L},nestedSchema:function(){return es},nestedSchemasArray:function(){return ei},presentation:function(){return et},validate:function(){return B},watch:function(){return $}});var a,n,s,i=r(75);let o=e=>Symbol(e),l=o(),c=o(),m=o("InitialValues"),d=o("Errors"),h=o("ChangedKeys"),u=o(),p=o(),f=o(),v=o(),y=Object,b="comparator",x="presentation",S="schema",k="schemasArray",g=y.keys,w=new WeakMap,N=(e,t="string")=>typeof e===t,E=e=>w.get(e),C=(e,t,r)=>(r=(r=E(t))&&r[e])?r:(r=N(r=y.getPrototypeOf(t),"object")?r:null)?C(e,r):void 0,T=(e,t)=>C(e,t)||{},F=(e,t,r,a,n,s)=>{t&&(N(r)||N(r,"symbol"))?((n=T(e,t))[f]!==t&&(n=y.assign({},n)),n[r]=a,n[f]=t,(E(t)||w.set(t,{})&&E(t))[e]=n):r.addInitializer(function(){F(e,this,r.name,a)})},B=(...e)=>(t,r)=>F(c,t,r,{validators:e});B.if=(e,t)=>(r,a)=>F(c,r,a,{validators:t,condition:e});let V=(e,t,r)=>H(g(e).concat(g(t))).forEach(e=>r(e)),I=(e,t,r,a)=>!!t[r]&&((!t[r].condition||t[r].condition(e[r],e))&&t[r].validators.find(t=>a=t(e[r],e)),(0,i.z)(()=>N(a)||!0===a?e[d][r]=a:delete e[d][r]),a),Z=(e,t,r,a)=>(a=!t[r]||t[r][b](e[r],e[m][r],e,r),(0,i.z)(()=>e[h][a?"delete":"add"](r)),!a),M=(e,t,r,a)=>g(a=T(t,e)).reduce((t,n)=>!!r(e,a,n)||t,!1),A=(e,t,r,a)=>g(a=T(l,e)).forEach(n=>r(e,n,a[n][t])),P=e=>{e[v]&&(e.updateIsValidAll(),e.updateIsChangedAny())},D=(e,t)=>g(e).forEach(e=>t(e));class Y{static create(e={},t){let r=new this(e),a=T(u,r),n=T(c,r),s=T(l,r),o={[m]:i.LO.ref,[h]:i.LO,[d]:i.LO,[x]:i.Fl,isChanged:i.Fl,isValid:i.Fl,errors:i.Fl,updateIsPropertyChanged:i.aD,updateIsPropertyValid:i.aD,updateIsChangedAny:i.aD,updateIsValidAll:i.aD,reset:i.aD,sync:i.aD};V(a,e,t=>{a[t]?r[t]=a[t](e[t],e,r,r[t]):t in e&&(r[t]=e[t])}),D(s,(e,t,a)=>{(0,i.wn)(r,e)||(t=i.LO,(a=s[e][b])===z||a===X?t=i.LO.ref:(a===J||a===W||a===_)&&(t=i.LO.shallow),o[e]=t)});try{(0,i.rC)(r,o)}catch(e){D(o,e=>!(0,i.wn)(r,e)&&o[e](r,e)),(0,i.rC)(r)}return r.sync(),r[v]=t,t||(D(s,(e,t)=>(0,i.N7)(r,e,()=>(t&&t(),t=(0,i.EH)(()=>Z(r,s,e))),!0)),D(n,e=>(0,i.EH)(()=>I(r,n,e)))),r.onInit&&r.onInit(),r}get presentation(){let e={},t=this,r=T(p,t);return V(r,t,(a,n)=>{(n=r[a])&&n.hidden||(e[a]=n&&n[x]?n[x](t[a],t):t[a])}),e}get isChanged(){return this[h].size>0}get isValid(){return y.values(this[d]).every(e=>!e)}get errors(){return this[d]}get changedProperties(){return this[h]}getInitial(e){return this[m][e]}sync(){let e={};A(this,"saveFn",(t,r,a)=>e[r]=a(t[r],t)),this[m]=e,P(this)}reset(){A(this,"restoreFn",(e,t,r)=>e[t]=r(e[m][t],e)),P(this)}updateIsPropertyValid(e){return I(this,T(c,this),e)}updateIsValidAll(){return M(this,c,I)}updateIsPropertyChanged(e){return Z(this,T(l,this),e)}updateIsChangedAny(){return M(this,l,Z)}constructor(){this[a]={},this[n]=H(),this[s]={}}}a=d,n=h,s=m;let O=e=>(e&&e.sync(),e),q=e=>(e&&e.reset(),e),z=(e,t,r,a,n,s)=>(!e||!e.isChanged)&&(e===t||!!e&&!!t&&e.constructor===t.constructor&&((s=g(n=T(l,e)).find(r=>!n[r][b](e[r],t[r],e)))&&(0,i.z)(()=>e[m]=t[m]),!s)),R=e=>(t,r,a,n)=>!!(r&&t?r.length===t.length&&t.every((t,s)=>e(t,r[s],a,n)):r===t),X=(e,t)=>e===t,j=e=>e,_=R(z),W=(e,t,r,a)=>!!(e&&t&&e.size===t.size&&Array.from(e).every(e=>t.has(e))),J=R(X),U=e=>e.slice(),H=e=>new Set(e),K=(e,t,r)=>{let a=(a,n)=>F(l,a,n,{[b]:e,saveFn:t,restoreFn:r});return a[b]=e,a},$=K(X,j,j);$.configure=K,$[S]=K(z,O,q),$[k]=K(_,e=>e?e.map(O):e,e=>e?e.map(q):e),$.array=K(J,U,U),$.set=K(W,H,H);let L=e=>(t,r)=>F(u,t,r,e),Q=(e,t)=>t?e.create(t):t,G=e=>(t,r)=>L((a,n,s,i)=>(t&&N(r)?r:r.name)in n?e(a,n,s,i):i)(t,r);L[S]=e=>G(t=>Q(e,t)),L[k]=e=>G(t=>t?t.map(t=>Q(e,t)):t),L.set=G(H);let ee=e=>(t,r)=>F(p,t,r,e),et=e=>ee({[x]:e});et.hidden=ee({hidden:!0});let er=(e,t,r,a,n,s)=>(B(r)(e,t),a(e,t),n(e,t),et(s)(e,t)),ea=e=>!e.isValid,en=e=>e[x],es=e=>(t,r)=>er(t,r,ea,$[S],L[S](e),en),ei=e=>(t,r)=>er(t,r,e=>e.some(ea),$[k],L[k](e),e=>e.map(en))},8520:function(e,t,r){e.exports=r(4593)}}]);