"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[2],{858:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(8993),a=r(4309),i=r(1568);let s=(0,a.Pi)(({schema:e,onRestore:t,onSave:r})=>(0,n.BX)("div",{style:{marginTop:12},children:[(0,n.tZ)(i.zx,{variant:"primary",onClick:r,disabled:!e.isChanged,children:"Save"}),(0,n.tZ)(i.zx,{onClick:t,disabled:!e.isChanged,style:{marginLeft:12},variant:"primary",children:"Restore"})]}))},1002:function(e,t,r){let n,a,i,s,o,c,l,h;r.r(t),r.d(t,{default:function(){return C}});var m,d=r(8993),u=r(1568),f={filename:"BasicSchema.ts",code:"import { FormSchema, watch } from '@yoskutik/mobx-form-schema';\r\n\r\nexport class BasicSchema extends FormSchema {\r\n  @watch name = 'Joe';\r\n\r\n  @watch surname = 'Dough';\r\n\r\n  @watch.set skills = new Set(['HTML', 'CSS', 'JavaScript']);\r\n}\r\n"},p={filename:"BasicExample.tsx",code:"import { observer } from 'mobx-react';\r\nimport { useMemo } from 'react';\r\nimport { ChoiceField, TextField } from '@components';\r\nimport { SchemaObservationInfo } from '../SchemaObservationInfo';\r\nimport { ObservationButtons } from '../ObservationButtons';\r\nimport { BasicSchema } from './BasicSchema';\r\n\r\nexport const BasicExample = observer(() => {\r\n  const schema = useMemo(() => BasicSchema.create(), []);\r\n\r\n  const handleSaveClick = () => {\r\n    schema.sync();\r\n  };\r\n\r\n  const handleRestoreClick = () => {\r\n    schema.reset();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TextField schema={schema} field=\"name\" label=\"Name\" />\r\n      <TextField schema={schema} field=\"surname\" label=\"Surname\" />\r\n      <ChoiceField\r\n        placeholder=\"Press 'Enter' or 'Space' to add item\"\r\n        schema={schema}\r\n        label=\"Skills\"\r\n        field=\"skills\"\r\n      />\r\n\r\n      <ObservationButtons\r\n        onRestore={handleRestoreClick}\r\n        onSave={handleSaveClick}\r\n        schema={schema}\r\n      />\r\n\r\n      <SchemaObservationInfo schema={schema} />\r\n    </div>\r\n  );\r\n});\r\n"},v=r(4309),b=r(8379),g=r(4133),S=r(858),k=r(8816),y=function(e,t,r,n,a,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,c=n.kind,l="getter"===c?"get":"setter"===c?"set":"value",h=!t&&e?n.static?e:e.prototype:null,m=t||(h?Object.getOwnPropertyDescriptor(h,n.name):{}),d=!1,u=r.length-1;u>=0;u--){var f={};for(var p in n)f[p]="access"===p?{}:n[p];for(var p in n.access)f.access[p]=n.access[p];f.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,r[u])("accessor"===c?{get:m.get,set:m.set}:m[l],f);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(o=s(v.get))&&(m.get=o),(o=s(v.set))&&(m.set=o),(o=s(v.init))&&a.unshift(o)}else(o=s(v))&&("field"===c?a.unshift(o):m[l]=o)}h&&Object.defineProperty(h,n.name,m),d=!0},x=function(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0};let B=(s=k.FormSchema,o=[],c=[],l=[],h=[],m=class extends s{constructor(){super(...arguments),this.name=(x(this,o),x(this,c,"Joe")),this.surname=x(this,l,"Dough"),this.skills=x(this,h,new Set(["HTML","CSS","JavaScript"]))}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=s[Symbol.metadata])&&void 0!==e?e:null):void 0;n=[k.watch],a=[k.watch],i=[(e=k.watch).set.bind(e)],y(null,null,n,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:t},c,o),y(null,null,a,{kind:"field",name:"surname",static:!1,private:!1,access:{has:e=>"surname"in e,get:e=>e.surname,set:(e,t)=>{e.surname=t}},metadata:t},l,o),y(null,null,i,{kind:"field",name:"skills",static:!1,private:!1,access:{has:e=>"skills"in e,get:e=>e.skills,set:(e,t)=>{e.skills=t}},metadata:t},h,o),t&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),m),w=(0,v.Pi)(()=>{let e=(0,b.useMemo)(()=>B.create(),[]),t=()=>{e.sync()},r=()=>{e.reset()};return(0,d.BX)("div",{children:[(0,d.tZ)(u.nv,{schema:e,field:"name",label:"Name"}),(0,d.tZ)(u.nv,{schema:e,field:"surname",label:"Surname"}),(0,d.tZ)(u.IG,{placeholder:"Press 'Enter' or 'Space' to add item",schema:e,label:"Skills",field:"skills"}),(0,d.tZ)(S.A,{onRestore:r,onSave:t,schema:e}),(0,d.tZ)(g.E,{schema:e})]})}),Z=()=>(0,d.BX)(d.HY,{children:[(0,d.BX)(u.$0,{title:"Resetting form into the initial state",children:[(0,d.tZ)(u.xv,{children:"It may be useful to ba able to reset the current state of the form into the initial one. For example, usually, those form that's developed to edit some data, can be restored into the initial state."}),(0,d.BX)(u.xv,{children:["If you use the ",(0,d.tZ)(u.EK,{children:"@watch"})," decorator, schema has to remember initial state of the desired property. And since, it knows the initial state, there is no problems in the ability of resetting current form state into the initial one."]}),(0,d.BX)(u.xv,{children:["Each schema has the ",(0,d.tZ)(u.EK,{children:"reset"})," method. You can the example of using it in the ",(0,d.tZ)("i",{children:'"Example of usage"'})," section."]}),(0,d.BX)(u.$0,{title:"Saving initial state as current",children:[(0,d.tZ)(u.xv,{children:"Also, you can save the initial state of the schema as current. After you do that, resetting schema will lead to restoring last saved state."}),(0,d.BX)(u.xv,{children:["To do that, you have to use the ",(0,d.tZ)(u.EK,{children:"sync"})," method."]})]}),(0,d.tZ)(u.$0,{title:"Example of usage",children:(0,d.tZ)(u.KE,{items:[f,p],children:(0,d.tZ)(w,{})})})]}),(0,d.tZ)(u.$0,{title:"Next",forcedLevel:3,children:(0,d.tZ)(u.xv,{children:"Just like with validation, there is a manual mode for checking form changes. Read about it in the next article."})})]});var C=Z},4133:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(8993),a=r(4309),i=r(75),s={root:"HQPJ",pre:"gwvf",preItem:"FVu9"};let o=(0,a.Pi)(({schema:e})=>{let t=e=>{let t=(0,i.ZN)(e);return JSON.stringify(t instanceof Set?[...t]:t,void 0,2)};return(0,n.BX)("div",{className:s.root,children:[(0,n.BX)("span",{children:["Is form changed: ",e.isChanged.toString()]}),(0,n.BX)("div",{className:s.pre,children:["Changed properties: ",t(e.changedProperties)]}),(0,n.BX)("div",{className:s.pre,children:["Initial properties properties:",Object.keys(e).map(r=>(0,n.BX)("div",{className:s.preItem,children:[r,": ",t(e.getInitial(r))]},r))]})]})})}}]);