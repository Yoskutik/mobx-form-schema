"use strict";(self.webpackChunk_yoskutik_mobx_form_schema_docs=self.webpackChunk_yoskutik_mobx_form_schema_docs||[]).push([[362],{4105:function(e,t,r){r.d(t,{C1:function(){return a},Do:function(){return n},Ei:function(){return s},b6:function(){return i}});let a=()=>e=>(null==e||!e.trim())&&"This field is required.",n=()=>e=>!/\S+@\S+\.\S+/.test(e)&&"Invalid email format.",i=()=>e=>!/^[a-zA-Z0-9_]+$/.test(e)&&"You can use only latin letters, digits and underscore sign.",s=e=>t=>t.length<e&&`Should be at least ${e} characters.`},4922:function(e,t,r){let a,n,i,s,o,l;r.d(t,{l:function(){return f}});var d,c=r(8520),u=r(4105),h=function(e,t,r,a,n,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=a.kind,d="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?a.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,a.name):{}),h=!1,p=r.length-1;p>=0;p--){var m={};for(var f in a)m[f]="access"===f?{}:a[f];for(var f in a.access)m.access[f]=a.access[f];m.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var y=(0,r[p])("accessor"===l?{get:u.get,set:u.set}:u[d],m);if("accessor"===l){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw TypeError("Object expected");(o=s(y.get))&&(u.get=o),(o=s(y.set))&&(u.set=o),(o=s(y.init))&&n.unshift(o)}else(o=s(y))&&("field"===l?n.unshift(o):u[d]=o)}c&&Object.defineProperty(c,a.name,u),h=!0},p=function(e,t,r){for(var a=arguments.length>2,n=0;n<t.length;n++)r=a?t[n].call(e,r):t[n].call(e);return a?r:void 0};let m=()=>(e,t)=>e!==t.password&&"Passwords mismatched",f=(i=c.FormSchema,s=[],o=[],l=[],d=class extends i{constructor(){super(...arguments),this.password=(p(this,s),p(this,o,"")),this.confirmPassword=p(this,l,"")}},(()=>{var e;let t="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(e=i[Symbol.metadata])&&void 0!==e?e:null):void 0;a=[(0,c.validate)((0,u.C1)(),(0,u.Ei)(8)),c.watch],n=[(0,c.validate)((0,u.C1)(),m()),c.watch],h(null,null,a,{kind:"field",name:"password",static:!1,private:!1,access:{has:e=>"password"in e,get:e=>e.password,set:(e,t)=>{e.password=t}},metadata:t},o,s),h(null,null,n,{kind:"field",name:"confirmPassword",static:!1,private:!1,access:{has:e=>"confirmPassword"in e,get:e=>e.confirmPassword,set:(e,t)=>{e.confirmPassword=t}},metadata:t},l,s),t&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),d)},8362:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var a=r(8993),n=r(1568),i={filename:"ManualExample.tsx",code:"import { observer } from 'mobx-react';\r\nimport { useMemo } from 'react';\r\nimport { Button, TextField } from '@components';\r\nimport { ComplexSchema } from '../ComplexValidation/ComplexSchema';\r\n\r\nexport const ManualExample = observer(() => {\r\n  const schema = useMemo(() => ComplexSchema.create({}, true), []);\r\n\r\n  return (\r\n    <div>\r\n      <TextField schema={schema} field=\"password\" type=\"password\" required label=\"Password\" />\r\n      <TextField\r\n        label=\"Confirm your password\"\r\n        field=\"confirmPassword\"\r\n        schema={schema}\r\n        type=\"password\"\r\n        required\r\n      />\r\n      <div style={{ marginBottom: 12, display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n        <Button onClick={() => schema.updateIsPropertyValid('password')} variant=\"primary\">\r\n          Validate password\r\n        </Button>\r\n        <Button onClick={() => schema.updateIsValidAll()} variant=\"primary\">\r\n          Validate all\r\n        </Button>\r\n      </div>\r\n      <span>Is form valid: {schema.isValid.toString()}</span>\r\n      <pre style={{ whiteSpace: 'pre-wrap' }}>\r\n        Form errors: {JSON.stringify(schema.errors, undefined, 2)}\r\n      </pre>\r\n    </div>\r\n  );\r\n});\r\n"},s=r(4309),o=r(8379),l=r(4922);let d=(0,s.Pi)(()=>{let e=(0,o.useMemo)(()=>l.l.create({},!0),[]);return(0,a.BX)("div",{children:[(0,a.tZ)(n.nv,{schema:e,field:"password",type:"password",required:!0,label:"Password"}),(0,a.tZ)(n.nv,{label:"Confirm your password",field:"confirmPassword",schema:e,type:"password",required:!0}),(0,a.BX)("div",{style:{marginBottom:12,display:"flex",gap:12,flexWrap:"wrap"},children:[(0,a.tZ)(n.zx,{onClick:()=>e.updateIsPropertyValid("password"),variant:"primary",children:"Validate password"}),(0,a.tZ)(n.zx,{onClick:()=>e.updateIsValidAll(),variant:"primary",children:"Validate all"})]}),(0,a.BX)("span",{children:["Is form valid: ",e.isValid.toString()]}),(0,a.BX)("pre",{style:{whiteSpace:"pre-wrap"},children:["Form errors: ",JSON.stringify(e.errors,void 0,2)]})]})}),c=()=>(0,a.BX)(a.HY,{children:[(0,a.BX)(n.$0,{title:"Manual validation",children:[(0,a.tZ)(n.xv,{children:"Usually, validation rules are atomic, and even if they are called repeatedly after each change in an input field, any computational load is not noticeable. But if you have some computationally expensive validation or any other reason to start validating your properties manually, this article will describe how to do it."}),(0,a.tZ)(n.bZ,{children:"Be aware that even in the manual mode your properties must be observable!"}),(0,a.BX)(n.xv,{children:["To start validate your schema manually you must create it in manual mode. To do it simply pass ",(0,a.tZ)(n.EK,{children:"true"})," as second argument to ",(0,a.tZ)(n.EK,{children:"create"})," static method."]}),(0,a.tZ)(n.KE,{items:[{filename:"ManualExample.ts",code:"const schema = ConditionalSchema.create({}, true);"}]}),(0,a.BX)(n.xv,{children:["And then, to validate a property, you can call the ",(0,a.tZ)(n.EK,{children:"updateIsPropertyValid"})," method and pass the name of a property. This method will update the ",(0,a.tZ)(n.EK,{children:"errors"})," object and return an error for the specified field or ",(0,a.tZ)(n.EK,{children:"false"})," if validation is passed."]}),(0,a.BX)(n.xv,{children:["Alternatively, you can call the ",(0,a.tZ)(n.EK,{children:"updateIsValidAll"})," method to validate all the properties in a schema. This method updates the ",(0,a.tZ)(n.EK,{children:"errors"})," object as well."]}),(0,a.tZ)(n.KE,{items:[i],children:(0,a.tZ)(d,{})})]}),(0,a.tZ)(n.$0,{title:"Next",forcedLevel:3,children:(0,a.tZ)(n.xv,{children:"You'll find out how can you observe form changes."})})]});var u=c},4593:function(e,t,r){r.d(t,{FormSchema:function(){return j},factory:function(){return G},nestedSchema:function(){return ei},nestedSchemasArray:function(){return es},presentation:function(){return et},validate:function(){return B},watch:function(){return U}});var a,n,i,s=r(75);let o=e=>Symbol(e),l=o(),d=o(),c=o("InitialValues"),u=o("Errors"),h=o("ChangedKeys"),p=o(),m=o(),f=o(),y=o(),v=Object,w="comparator",g="presentation",b="schema",x="schemasArray",C=v.keys,I=new WeakMap,S=(e,t="string")=>typeof e===t,E=e=>I.get(e),P=(e,t,r)=>(r=(r=E(t))&&r[e])?r:(r=S(r=v.getPrototypeOf(t),"object")?r:null)?P(e,r):void 0,V=(e,t)=>P(e,t)||{},Z=(e,t,r,a,n,i)=>{t&&(S(r)||S(r,"symbol"))?((n=V(e,t))[f]!==t&&(n=v.assign({},n)),n[r]=a,n[f]=t,(E(t)||I.set(t,{})&&E(t))[e]=n):r.addInitializer(function(){Z(e,this,r.name,a)})},B=(...e)=>(t,r)=>Z(d,t,r,{validators:e});B.if=(e,t)=>(r,a)=>Z(d,r,a,{validators:t,condition:e});let k=(e,t,r)=>Y(C(e).concat(C(t))).forEach(e=>r(e)),F=(e,t,r,a)=>!!t[r]&&((!t[r].condition||t[r].condition(e[r],e))&&t[r].validators.find(t=>a=t(e[r],e)),(0,s.z)(()=>S(a)||!0===a?e[u][r]=a:delete e[u][r]),a),O=(e,t,r,a)=>(a=!t[r]||t[r][w](e[r],e[c][r],e,r),(0,s.z)(()=>e[h][a?"delete":"add"](r)),!a),A=(e,t,r,a)=>C(a=V(t,e)).reduce((t,n)=>!!r(e,a,n)||t,!1),z=(e,t,r,a)=>C(a=V(l,e)).forEach(n=>r(e,n,a[n][t])),T=e=>{e[y]&&(e.updateIsValidAll(),e.updateIsChangedAny())},_=(e,t)=>C(e).forEach(e=>t(e));class j{static create(e={},t){let r=new this(e),a=V(p,r),n=V(d,r),i=V(l,r),o={[c]:s.LO.ref,[h]:s.LO,[u]:s.LO,[g]:s.Fl,isChanged:s.Fl,isValid:s.Fl,errors:s.Fl,updateIsPropertyChanged:s.aD,updateIsPropertyValid:s.aD,updateIsChangedAny:s.aD,updateIsValidAll:s.aD,reset:s.aD,sync:s.aD};k(a,e,t=>{a[t]?r[t]=a[t](e[t],e,r,r[t]):t in e&&(r[t]=e[t])}),_(i,(e,t,a)=>{(0,s.wn)(r,e)||(t=s.LO,(a=i[e][w])===D||a===L?t=s.LO.ref:(a===H||a===$||a===N)&&(t=s.LO.shallow),o[e]=t)});try{(0,s.rC)(r,o)}catch(e){_(o,e=>!(0,s.wn)(r,e)&&o[e](r,e)),(0,s.rC)(r)}return r.sync(),r[y]=t,t||(_(i,(e,t)=>(0,s.N7)(r,e,()=>(t&&t(),t=(0,s.EH)(()=>O(r,i,e))),!0)),_(n,e=>(0,s.EH)(()=>F(r,n,e)))),r.onInit&&r.onInit(),r}get presentation(){let e={},t=this,r=V(m,t);return k(r,t,(a,n)=>{(n=r[a])&&n.hidden||(e[a]=n&&n[g]?n[g](t[a],t):t[a])}),e}get isChanged(){return this[h].size>0}get isValid(){return v.values(this[u]).every(e=>!e)}get errors(){return this[u]}get changedProperties(){return this[h]}getInitial(e){return this[c][e]}sync(){let e={};z(this,"saveFn",(t,r,a)=>e[r]=a(t[r],t)),this[c]=e,T(this)}reset(){z(this,"restoreFn",(e,t,r)=>e[t]=r(e[c][t],e)),T(this)}updateIsPropertyValid(e){return F(this,V(d,this),e)}updateIsValidAll(){return A(this,d,F)}updateIsPropertyChanged(e){return O(this,V(l,this),e)}updateIsChangedAny(){return A(this,l,O)}constructor(){this[a]={},this[n]=Y(),this[i]={}}}a=u,n=h,i=c;let K=e=>(e&&e.sync(),e),X=e=>(e&&e.reset(),e),D=(e,t,r,a,n,i)=>(!e||!e.isChanged)&&(e===t||!!e&&!!t&&e.constructor===t.constructor&&((i=C(n=V(l,e)).find(r=>!n[r][w](e[r],t[r],e)))&&(0,s.z)(()=>e[c]=t[c]),!i)),M=e=>(t,r,a,n)=>!!(r&&t?r.length===t.length&&t.every((t,i)=>e(t,r[i],a,n)):r===t),L=(e,t)=>e===t,q=e=>e,N=M(D),$=(e,t,r,a)=>!!(e&&t&&e.size===t.size&&Array.from(e).every(e=>t.has(e))),H=M(L),W=e=>e.slice(),Y=e=>new Set(e),J=(e,t,r)=>{let a=(a,n)=>Z(l,a,n,{[w]:e,saveFn:t,restoreFn:r});return a[w]=e,a},U=J(L,q,q);U.configure=J,U[b]=J(D,K,X),U[x]=J(N,e=>e?e.map(K):e,e=>e?e.map(X):e),U.array=J(H,W,W),U.set=J($,Y,Y);let G=e=>(t,r)=>Z(p,t,r,e),Q=(e,t)=>t?e.create(t):t,R=e=>(t,r)=>G((a,n,i,s)=>(t&&S(r)?r:r.name)in n?e(a,n,i,s):s)(t,r);G[b]=e=>R(t=>Q(e,t)),G[x]=e=>R(t=>t?t.map(t=>Q(e,t)):t),G.set=R(Y);let ee=e=>(t,r)=>Z(m,t,r,e),et=e=>ee({[g]:e});et.hidden=ee({hidden:!0});let er=(e,t,r,a,n,i)=>(B(r)(e,t),a(e,t),n(e,t),et(i)(e,t)),ea=e=>!e.isValid,en=e=>e[g],ei=e=>(t,r)=>er(t,r,ea,U[b],G[b](e),en),es=e=>(t,r)=>er(t,r,e=>e.some(ea),U[x],G[x](e),e=>e.map(en))},8520:function(e,t,r){e.exports=r(4593)}}]);